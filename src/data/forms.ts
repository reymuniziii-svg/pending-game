import type { ImmigrationForm, FormType, ImmigrationStatusType } from '@/types'

// Real USCIS form data (2024 fees and processing times)
export const IMMIGRATION_FORMS: Record<FormType, ImmigrationForm> = {
  'i-130': {
    id: 'i-130',
    formNumber: 'I-130',
    officialName: 'Petition for Alien Relative',
    commonName: 'Family Petition',
    purpose: 'A U.S. citizen or permanent resident files this to establish a relationship with an eligible relative who wishes to immigrate.',
    eligibleStatuses: ['green-card-conditional', 'green-card-permanent', 'naturalized-citizen'],
    requiredDocuments: [
      'Proof of U.S. citizenship or permanent residence (petitioner)',
      'Proof of relationship (birth certificate, marriage certificate)',
      'Passport photos',
      'Evidence of any legal name changes',
    ],
    fee: 535,
    processingTimeMonths: { min: 12, typical: 24, max: 60 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Insufficient proof of relationship',
      'Missing documents',
      'Inconsistencies in application',
    ],
    denialReasons: [
      'Fraudulent marriage',
      'Petitioner cannot prove status',
      'Relationship not qualifying',
    ],
    approvalLeadsTo: ['i-485', 'consular-processing'],
    notes: 'This is just the first step. Approval does not grant any immigration status to the beneficiary.',
  },
  'i-485': {
    id: 'i-485',
    formNumber: 'I-485',
    officialName: 'Application to Register Permanent Residence or Adjust Status',
    commonName: 'Green Card Application',
    purpose: 'Apply for a green card while in the United States.',
    eligibleStatuses: ['asylum-granted', 'h1b-active', 'h4-dependent', 'l1a-executive', 'l1b-specialized', 'k1-fiance'],
    requiredDocuments: [
      'Approved immigrant petition (I-130, I-140, etc.)',
      'Medical examination (I-693)',
      'Passport photos',
      'Birth certificate',
      'Evidence of lawful entry',
      'Affidavit of Support (I-864)',
    ],
    fee: 1225,
    processingTimeMonths: { min: 8, typical: 18, max: 36 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Medical exam issues',
      'Insufficient financial support evidence',
      'Missing documentation',
    ],
    denialReasons: [
      'Inadmissibility grounds (criminal, health, public charge)',
      'Unlawful presence bars',
      'Fraud or misrepresentation',
    ],
    approvalLeadsTo: ['green-card-conditional', 'green-card-permanent'],
    notes: 'Not available to everyone. Entry Without Inspection (EWI) often disqualifies applicants.',
  },
  'i-765': {
    id: 'i-765',
    formNumber: 'I-765',
    officialName: 'Application for Employment Authorization',
    commonName: 'Work Permit / EAD',
    purpose: 'Apply for permission to work in the United States.',
    eligibleStatuses: ['asylum-pending', 'i485-pending', 'daca', 'tps', 'h4-dependent'],
    requiredDocuments: [
      'Proof of eligibility category',
      'Passport photos',
      'Copy of most recent EAD (if renewal)',
      'Supporting documents based on category',
    ],
    fee: 410,
    processingTimeMonths: { min: 2, typical: 5, max: 10 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Photo not meeting specifications',
      'Missing category-specific evidence',
    ],
    denialReasons: [
      'Not eligible under claimed category',
      'Underlying application denied',
    ],
    approvalLeadsTo: [],
    notes: 'EAD cards are typically valid for 1-2 years and must be renewed.',
  },
  'i-131': {
    id: 'i-131',
    formNumber: 'I-131',
    officialName: 'Application for Travel Document',
    commonName: 'Advance Parole',
    purpose: 'Permission to re-enter the U.S. after traveling abroad while an application is pending.',
    eligibleStatuses: ['i485-pending', 'daca', 'tps'],
    requiredDocuments: [
      'Proof of pending application',
      'Passport photos',
      'Evidence of need to travel',
    ],
    fee: 575,
    processingTimeMonths: { min: 2, typical: 4, max: 8 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Unclear reason for travel',
      'Missing supporting documents',
    ],
    denialReasons: [
      'No pending eligible application',
      'Security concerns',
    ],
    approvalLeadsTo: [],
    notes: 'CRITICAL: Traveling without Advance Parole while adjustment is pending may abandon your case.',
  },
  'i-821d': {
    id: 'i-821d',
    formNumber: 'I-821D',
    officialName: 'Consideration of Deferred Action for Childhood Arrivals',
    commonName: 'DACA Application',
    purpose: 'Request DACA status for protection from deportation and work authorization.',
    eligibleStatuses: ['undocumented'],
    requiredDocuments: [
      'Proof of continuous residence since June 15, 2007',
      'Proof of presence on June 15, 2012',
      'Proof of current presence',
      'School records, military records, or employment records',
      'Proof of age (under 31 on June 15, 2012)',
    ],
    fee: 495,
    processingTimeMonths: { min: 4, typical: 8, max: 18 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Gaps in evidence of continuous presence',
      'Insufficient proof of education/military',
    ],
    denialReasons: [
      'Criminal history',
      'Threat to public safety',
      'Not meeting continuous presence requirement',
    ],
    approvalLeadsTo: ['daca'],
    notes: 'DACA provides temporary protection only. It does not provide a path to citizenship or permanent status.',
  },
  'i-589': {
    id: 'i-589',
    formNumber: 'I-589',
    officialName: 'Application for Asylum and for Withholding of Removal',
    commonName: 'Asylum Application',
    purpose: 'Request protection in the U.S. due to persecution or fear of persecution in home country.',
    eligibleStatuses: ['undocumented', 'tourist-b1b2', 'student-f1'],
    requiredDocuments: [
      'Personal statement describing persecution',
      'Country conditions evidence',
      'Identity documents (if available)',
      'Evidence of persecution (if available)',
      'Medical/psychological evaluations (if applicable)',
    ],
    fee: 0,
    processingTimeMonths: { min: 6, typical: 36, max: 72 },
    possibleOutcomes: ['approved', 'denied', 'rfe', 'referred-to-court'],
    rfeCommonReasons: [
      'Insufficient detail in personal statement',
      'Missing country conditions documentation',
    ],
    denialReasons: [
      'Failure to establish persecution',
      'Safe third country rule',
      'Criminal bars',
      'Filing after one-year deadline',
    ],
    approvalLeadsTo: ['asylum-granted'],
    notes: 'Must be filed within one year of arrival. Affirmative asylum is processed by USCIS; defensive asylum is decided by immigration court.',
  },
  'i-360': {
    id: 'i-360',
    formNumber: 'I-360',
    officialName: 'Petition for Amerasian, Widow(er), or Special Immigrant',
    commonName: 'VAWA Self-Petition',
    purpose: 'Allows victims of domestic violence by U.S. citizen or LPR spouse/parent to self-petition.',
    eligibleStatuses: ['undocumented', 'h4-dependent'],
    requiredDocuments: [
      'Evidence of relationship to abuser',
      'Evidence of abuse (police reports, medical records, affidavits)',
      'Evidence of good moral character',
      'Evidence abuser is USC or LPR',
    ],
    fee: 0,
    processingTimeMonths: { min: 12, typical: 24, max: 48 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Insufficient evidence of abuse',
      'Unclear relationship evidence',
    ],
    denialReasons: [
      'Petitioner committed abuse',
      'Insufficient evidence of qualifying relationship',
    ],
    approvalLeadsTo: ['vawa-pending', 'i-485'],
    notes: 'VAWA protections apply regardless of gender. The abuser is not notified of the petition.',
  },
  'i-601a': {
    id: 'i-601a',
    formNumber: 'I-601A',
    officialName: 'Application for Provisional Unlawful Presence Waiver',
    commonName: 'Provisional Waiver',
    purpose: 'Waive the 3-year or 10-year unlawful presence bar before departing for consular processing.',
    eligibleStatuses: ['undocumented', 'undocumented-overstay'],
    requiredDocuments: [
      'Evidence of qualifying relative (USC or LPR spouse or parent)',
      'Evidence of extreme hardship to qualifying relative',
      'Proof of approved immigrant petition',
    ],
    fee: 630,
    processingTimeMonths: { min: 6, typical: 12, max: 24 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Insufficient hardship evidence',
      'Missing medical/financial documentation',
    ],
    denialReasons: [
      'Failure to establish extreme hardship',
      'Other inadmissibility grounds',
    ],
    approvalLeadsTo: ['consular-processing'],
    notes: 'CRITICAL: Waiver approval is provisional. Must still attend consular interview abroad. Denial at consulate triggers the bar.',
  },
  'i-751': {
    id: 'i-751',
    formNumber: 'I-751',
    officialName: 'Petition to Remove Conditions on Residence',
    commonName: 'Remove Conditions',
    purpose: 'Remove the conditional status from a green card obtained through marriage.',
    eligibleStatuses: ['green-card-conditional'],
    requiredDocuments: [
      'Joint financial documents (taxes, bank accounts)',
      'Proof of shared residence (lease, mortgage, utilities)',
      'Evidence of bona fide marriage (photos, affidavits)',
      'Birth certificates of children (if any)',
    ],
    fee: 595,
    processingTimeMonths: { min: 12, typical: 24, max: 36 },
    possibleOutcomes: ['approved', 'denied', 'rfe', 'interview-required'],
    rfeCommonReasons: [
      'Insufficient evidence of bona fide marriage',
      'Gaps in joint documentation',
    ],
    denialReasons: [
      'Marriage fraud',
      'Marriage terminated',
      'Insufficient evidence of good faith marriage',
    ],
    approvalLeadsTo: ['green-card-permanent'],
    notes: 'Must file within 90 days before conditional residence expires. Failure to file may result in deportation.',
  },
  'i-90': {
    id: 'i-90',
    formNumber: 'I-90',
    officialName: 'Application to Replace Permanent Resident Card',
    commonName: 'Green Card Renewal',
    purpose: 'Renew or replace an expiring, lost, or damaged green card.',
    eligibleStatuses: ['green-card-permanent'],
    requiredDocuments: [
      'Current or expired green card (or police report if lost)',
      'Passport photos',
    ],
    fee: 455,
    processingTimeMonths: { min: 6, typical: 12, max: 18 },
    possibleOutcomes: ['approved', 'denied'],
    rfeCommonReasons: [],
    denialReasons: [
      'Abandonment of permanent residence',
      'Criminal inadmissibility',
    ],
    approvalLeadsTo: [],
    notes: 'Renewal does not change immigration status. Just updates the physical card.',
  },
  'n-400': {
    id: 'n-400',
    formNumber: 'N-400',
    officialName: 'Application for Naturalization',
    commonName: 'Citizenship Application',
    purpose: 'Apply to become a naturalized U.S. citizen.',
    eligibleStatuses: ['green-card-permanent'],
    requiredDocuments: [
      'Proof of continuous residence (5 years, or 3 if married to USC)',
      'Tax returns',
      'Travel history',
      'Evidence of good moral character',
    ],
    fee: 760,
    processingTimeMonths: { min: 8, typical: 14, max: 24 },
    possibleOutcomes: ['approved', 'denied', 'interview-required'],
    rfeCommonReasons: [
      'Additional evidence of residence needed',
      'Criminal history documentation',
    ],
    denialReasons: [
      'Failure to meet continuous residence requirement',
      'Criminal bars',
      'Failure to pass civics/English test',
      'Fraud in obtaining green card',
    ],
    approvalLeadsTo: ['naturalized-citizen'],
    notes: 'The final step. Includes civics and English tests. Upon approval, take the Oath of Allegiance.',
  },
  'ds-160': {
    id: 'ds-160',
    formNumber: 'DS-160',
    officialName: 'Online Nonimmigrant Visa Application',
    commonName: 'Visa Application',
    purpose: 'Apply for a nonimmigrant visa to enter the United States.',
    eligibleStatuses: [],
    requiredDocuments: [
      'Valid passport',
      'Photo meeting visa requirements',
      'Purpose of travel documentation',
      'Financial evidence',
    ],
    fee: 185,
    processingTimeMonths: { min: 1, typical: 2, max: 6 },
    possibleOutcomes: ['approved', 'denied'],
    rfeCommonReasons: [],
    denialReasons: [
      'Immigrant intent (Section 214b)',
      'Ineligibility grounds',
      'Insufficient ties to home country',
    ],
    approvalLeadsTo: ['tourist-b1b2', 'student-f1', 'h1b-active'],
    notes: 'Processed at U.S. consulates abroad. High denial rates in some countries.',
  },
  'ds-260': {
    id: 'ds-260',
    formNumber: 'DS-260',
    officialName: 'Online Immigrant Visa Application',
    commonName: 'Immigrant Visa Application',
    purpose: 'Apply for an immigrant visa (green card) at a U.S. consulate abroad.',
    eligibleStatuses: ['i130-pending'],
    requiredDocuments: [
      'Approved petition (I-130 or I-140)',
      'Civil documents (birth, marriage, police certificates)',
      'Medical examination',
      'Affidavit of Support',
      'Passport valid for 6+ months',
    ],
    fee: 325,
    processingTimeMonths: { min: 2, typical: 6, max: 18 },
    possibleOutcomes: ['approved', 'denied', 'administrative-processing'],
    rfeCommonReasons: [
      'Missing documents',
      'Background check delays',
    ],
    denialReasons: [
      'Inadmissibility grounds',
      'Unlawful presence bar triggered',
      'Fraud or misrepresentation',
    ],
    approvalLeadsTo: ['green-card-permanent'],
    notes: 'Used when adjusting status inside the U.S. is not possible. Requires leaving the U.S.',
  },
  'i-140': {
    id: 'i-140',
    formNumber: 'I-140',
    officialName: 'Immigrant Petition for Alien Workers',
    commonName: 'Employment-Based Petition',
    purpose: 'Employer petitions for an employee to become a permanent resident.',
    eligibleStatuses: ['h1b-active', 'l1a-executive', 'l1b-specialized', 'o1-extraordinary'],
    requiredDocuments: [
      'Labor certification (PERM) for most categories',
      'Evidence of job offer and ability to pay',
      'Evidence of qualifications',
    ],
    fee: 700,
    processingTimeMonths: { min: 4, typical: 8, max: 18 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Insufficient proof of qualifying employment',
      'Questions about ability to pay',
    ],
    denialReasons: [
      'Job requirements not met',
      'Employer cannot demonstrate ability to pay',
    ],
    approvalLeadsTo: ['i-485', 'consular-processing'],
    notes: 'Approval sets priority date but does not grant status. Long backlogs for certain countries (India: 40+ years for EB-2/EB-3).',
  },
  'i-129': {
    id: 'i-129',
    formNumber: 'I-129',
    officialName: 'Petition for Nonimmigrant Worker',
    commonName: 'H-1B Petition',
    purpose: 'Employer petitions for a specialty occupation worker.',
    eligibleStatuses: ['student-f1-opt', 'student-f1-stem-opt'],
    requiredDocuments: [
      'Labor Condition Application (LCA)',
      'Evidence of specialty occupation',
      'Evidence of qualifying degree',
      'Employer documentation',
    ],
    fee: 1710,
    processingTimeMonths: { min: 2, typical: 4, max: 8 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Specialty occupation not demonstrated',
      'Beneficiary qualifications questioned',
    ],
    denialReasons: [
      'Not a specialty occupation',
      'Beneficiary lacks required degree',
      'Wage issues',
    ],
    approvalLeadsTo: ['h1b-active'],
    notes: 'Subject to annual cap and lottery (April filing). Cap-exempt employers exist.',
  },
  'i-539': {
    id: 'i-539',
    formNumber: 'I-539',
    officialName: 'Application to Extend/Change Nonimmigrant Status',
    commonName: 'Status Change/Extension',
    purpose: 'Extend current nonimmigrant status or change to a different nonimmigrant status.',
    eligibleStatuses: ['tourist-b1b2', 'student-f1', 'h4-dependent'],
    requiredDocuments: [
      'Current I-94',
      'Evidence supporting extension/change',
      'Proof of financial support',
    ],
    fee: 370,
    processingTimeMonths: { min: 3, typical: 6, max: 12 },
    possibleOutcomes: ['approved', 'denied', 'rfe'],
    rfeCommonReasons: [
      'Insufficient evidence of intent to depart',
      'Missing financial documentation',
    ],
    denialReasons: [
      'Unauthorized employment',
      'Immigration intent',
      'Status violation',
    ],
    approvalLeadsTo: [],
    notes: 'Filing before status expires preserves lawful presence while pending.',
  },
}

// Helper function to get forms available for a given status
export function getAvailableFormsForStatus(status: ImmigrationStatusType): ImmigrationForm[] {
  return Object.values(IMMIGRATION_FORMS).filter(form =>
    form.eligibleStatuses.includes(status)
  )
}

// Helper function to calculate total cost for a form
export function getFormTotalCost(formId: FormType): number {
  return IMMIGRATION_FORMS[formId]?.fee || 0
}

// Helper function to get expected processing time range
export function getProcessingTimeDescription(formId: FormType): string {
  const form = IMMIGRATION_FORMS[formId]
  if (!form) return 'Unknown'
  const { min, typical, max } = form.processingTimeMonths
  return `${min}-${max} months (typically ${typical})`
}
