import type { GameEvent, EventChain } from '@/types'

// Import chain events
import { MARIA_CHAIN_EVENTS, MARIA_CHAINS } from './maria-chains'
import { DAVID_CHAIN_EVENTS, DAVID_CHAINS } from './david-chains'
import { FATIMA_CHAIN_EVENTS, FATIMA_CHAINS } from './fatima-chains'
import { ELENA_CHAIN_EVENTS, ELENA_CHAINS } from './elena-chains'

// ============ MARIA (DACA) EVENTS ============

const MARIA_EVENTS: GameEvent[] = [
  {
    id: 'maria_renewal_notice',
    title: 'The Renewal Notice',
    description: 'The envelope from USCIS arrives. You know what it is before you open it. Time to renew your DACA again. The same dance every two years.',
    timing: { type: 'random', earliestMonth: 3, latestMonth: 24 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'maria' },
      { type: 'flag', target: 'daca_renewed_recently', operator: 'not-exists', value: true },
    ],
    weight: 80,
    characterIds: ['maria'],
    requiredStatuses: ['daca'],
    choices: [
      {
        id: 'renew_now',
        text: 'Pay the $495 and file immediately',
        costs: [{ type: 'money', amount: 495 }],
        requirements: [{ type: 'finance', target: 'balance', operator: '>=', value: 495 }],
        outcomes: [
          { type: 'finance-subtract', target: 'DACA Renewal Fee', value: 495 },
          { type: 'flag-set', target: 'daca_renewed_recently', value: true },
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'queue-event', target: 'maria_renewal_approved', delayMonths: 5 },
        ],
        outcomeText: 'You file the forms, take the photos, pay the fee. The same ritual. You\'ve done this so many times you could do it in your sleep. Now you wait. Again.',
      },
      {
        id: 'delay_renew',
        text: 'Wait a month - money is tight',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'flag-set', target: 'daca_renewal_delayed', value: true },
        ],
        outcomeText: 'Every day that passes is a day closer to expiration. You check your bank account constantly. The anxiety doesn\'t help.',
      },
    ],
    tags: ['immigration', 'daca', 'renewal'],
    isRepeatable: true,
    isMandatory: false,
    priority: 5,
  },
  {
    id: 'maria_renewal_approved',
    title: 'Renewal Approved',
    description: 'The letter arrives. "Your request for Deferred Action for Childhood Arrivals has been approved." Two more years. The relief washes over you like a wave.',
    timing: { type: 'triggered' },
    conditions: [],
    weight: 0,
    characterIds: ['maria'],
    choices: [
      {
        id: 'relief',
        text: 'Feel the relief',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
          { type: 'flag-set', target: 'daca_renewed_recently', value: false },
        ],
        outcomeText: 'Two more years. It\'s not permanence. It\'s not a path forward. But it\'s something. You can work. You can stay. For now.',
      },
    ],
    tags: ['immigration', 'daca', 'renewal'],
    isRepeatable: true,
    isMandatory: false,
    priority: 8,
  },
  {
    id: 'maria_miguel_proposal',
    title: 'The Question',
    description: 'Miguel gets down on one knee. "Maria Santos, will you marry me?" Your heart soars. Then reality crashes in. Marriage to a citizen doesn\'t fix your situation. Not when you crossed without papers.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'maria' },
      { type: 'flag', target: 'miguel_proposed', operator: 'not-exists', value: true },
    ],
    weight: 50,
    characterIds: ['maria'],
    choices: [
      {
        id: 'say_yes',
        text: 'Say yes',
        outcomes: [
          { type: 'relationship-change', target: 'miguel', value: 20 },
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'flag-set', target: 'miguel_proposed', value: true },
          { type: 'flag-set', target: 'engaged_to_miguel', value: true },
        ],
        outcomeText: 'You say yes through tears. You love him. But later that night, you look up the rules again. Entered without inspection. Ten-year bar. The catch-22 hasn\'t changed.',
        isRecommended: true,
      },
      {
        id: 'explain_situation',
        text: 'Explain why marriage doesn\'t solve things',
        outcomes: [
          { type: 'relationship-change', target: 'miguel', value: -5 },
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'flag-set', target: 'miguel_proposed', value: true },
        ],
        outcomeText: '"Miguel, I love you. But you need to understand what marriage means for us. If I leave to apply at the consulate, I can\'t come back for ten years. Maybe forever." His face falls as reality sets in.',
      },
    ],
    tags: ['relationship', 'marriage', 'immigration'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'maria_policy_news',
    title: 'Breaking News',
    description: 'Your phone buzzes with news alerts. "Supreme Court to rule on DACA program." "Administration announces review of DACA." "Future of Dreamers uncertain." The headlines blur together.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 120 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'maria' },
    ],
    weight: 40,
    characterIds: ['maria'],
    requiredStatuses: ['daca'],
    choices: [
      {
        id: 'follow_news',
        text: 'Follow the coverage obsessively',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
          { type: 'flag-increment', target: 'policy_anxiety_count', value: 1 },
        ],
        outcomeText: 'You refresh Twitter every few minutes. Read every analysis. Listen to every podcast. The uncertainty is crushing, but you can\'t look away.',
      },
      {
        id: 'limit_news',
        text: 'Limit your news consumption',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'flag-increment', target: 'policy_anxiety_count', value: 1 },
        ],
        outcomeText: 'You try to focus on what you can control. Your students. Your work. Your life. But the uncertainty is always there, humming in the background.',
      },
      {
        id: 'organize',
        text: 'Channel anxiety into organizing',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
          { type: 'flag-increment', target: 'activism_count', value: 1 },
        ],
        outcomeText: 'You join a local immigrant rights group. If your future is uncertain, at least you\'re not facing it alone. The solidarity helps.',
        isRecommended: true,
      },
    ],
    tags: ['immigration', 'daca', 'policy', 'stress'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'maria_student_success',
    title: 'A Student\'s Triumph',
    description: 'Maria Rodriguez, one of your third-graders, runs up to you after class. "Miss Santos! Miss Santos! I got into the gifted program!" Her eyes are shining.',
    timing: { type: 'random', earliestMonth: 9, latestMonth: 36 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'maria' },
    ],
    weight: 45,
    characterIds: ['maria'],
    choices: [
      {
        id: 'celebrate',
        text: 'Celebrate her achievement',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
          { type: 'flag-increment', target: 'students_helped', value: 1 },
        ],
        outcomeText: 'This is why you became a teacher. These moments. Watching a child realize they can do things they never thought possible. She\'ll remember this day forever.',
        isRecommended: true,
      },
      {
        id: 'reflect',
        text: 'Feel the bittersweet irony',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'She\'ll have opportunities you never will. Citizenship by birth. Doors that will never close on her. You smile for her. And bury the grief deep.',
      },
    ],
    tags: ['career', 'positive', 'teaching'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'maria_wedding_planning',
    title: 'Wedding Plans',
    description: 'Miguel wants to start planning the wedding. Venues. Guest lists. Dates. Every decision reminds you of what this marriage can\'t fix.',
    timing: { type: 'random', earliestMonth: 18, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'maria' },
      { type: 'flag', target: 'engaged_to_miguel', operator: '==', value: true },
    ],
    weight: 50,
    characterIds: ['maria'],
    choices: [
      {
        id: 'embrace_joy',
        text: 'Focus on the love, not the paperwork',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'relationship-change', target: 'miguel', value: 10 },
        ],
        outcomeText: 'You choose the flowers. Argue playfully about the cake. For these moments, you\'re just a couple in love. The system can wait until tomorrow.',
        isRecommended: true,
      },
      {
        id: 'practical',
        text: 'Discuss the legal realities first',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'relationship-change', target: 'miguel', value: -5 },
        ],
        outcomeText: '"We should talk to a lawyer before we pick a date. What if the rules change? What if—" Miguel\'s face falls. "Can\'t we just... be happy for a moment?"',
      },
    ],
    tags: ['relationship', 'wedding', 'hope'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'maria_mothers_birthday',
    title: 'Mother\'s Birthday',
    description: 'Your mother is turning 60 in Mexico. She\'s never met Miguel. She\'s starting to forget things. "Maybe just this once," you think. "Maybe I could go..."',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 72 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'maria' },
    ],
    weight: 40,
    characterIds: ['maria'],
    choices: [
      {
        id: 'send_gift',
        text: 'Send a gift and video call',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'finance-subtract', target: 'Gift for Mother', value: 200 },
        ],
        outcomeText: 'You watch her open the package on a pixelated screen. Her hands shake a little more than last year. She cries. You cry. "I miss you, mija." "I know, Mamá. I know."',
      },
      {
        id: 'consider_trip',
        text: 'Research what it would take to go',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
          { type: 'flag-set', target: 'researched_travel_risk', value: true },
        ],
        outcomeText: 'If you leave, you can\'t come back. Not legally. DACA doesn\'t include travel authorization. 22 years in America, and it could end with one plane ticket.',
        isDangerous: true,
      },
    ],
    tags: ['family', 'emotional', 'sacrifice'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'maria_colleague_asks',
    title: 'The Question Everyone Asks',
    description: '"So where are you from?" A new colleague asks at lunch. The simple question that\'s never simple. How much do you share?',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'maria' },
    ],
    weight: 55,
    characterIds: ['maria'],
    choices: [
      {
        id: 'simple_answer',
        text: '"I\'m from Arizona. Been here since I was six."',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'It\'s true. Just not the whole truth. They nod and move on. You wonder if they would have moved on if you\'d said "Mexico."',
      },
      {
        id: 'full_truth',
        text: 'Share your whole story',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'stat-change', target: 'communityConnection', value: 5 },
        ],
        outcomeText: '"I\'m a Dreamer. Brought here when I was six." The pause feels eternal. Then: "That must be so hard. I can\'t imagine." Sometimes people surprise you.',
        isRecommended: true,
      },
    ],
    tags: ['identity', 'social', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'maria_license_renewal',
    title: 'DMV Day',
    description: 'Time to renew your driver\'s license. In some states, that\'s simple. In yours, it means proving your status. Again.',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'maria' },
    ],
    weight: 45,
    characterIds: ['maria'],
    choices: [
      {
        id: 'go_prepared',
        text: 'Go with all your DACA documents',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'flag-increment', target: 'bureaucracy_count', value: 1 },
        ],
        outcomeText: 'The clerk looks at your EAD card, your approval notice, your passport. Types. Frowns. Calls a supervisor. An hour later, you have a license that expires when your DACA does. Everything is temporary.',
      },
    ],
    tags: ['bureaucracy', 'daily-life', 'daca'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'maria_high_school_reunion',
    title: 'Class Reunion',
    description: 'Your 10-year high school reunion is in three months. "Remember Maria? She was valedictorian!" What would they think if they knew?',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'maria' },
      { type: 'flag', target: 'reunion_attended', operator: 'not-exists', value: true },
    ],
    weight: 35,
    characterIds: ['maria'],
    choices: [
      {
        id: 'attend',
        text: 'Attend the reunion',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'stat-change', target: 'communityConnection', value: 5 },
          { type: 'flag-set', target: 'reunion_attended', value: true },
        ],
        outcomeText: '"Maria! You\'re a teacher now? That\'s amazing!" They don\'t ask about your future plans. They assume you have them. You smile and nod.',
      },
      {
        id: 'skip',
        text: 'Skip it',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'You\'re not ready for the questions. The comparisons. Watching classmates talk about their plans to travel, to move, to grow in ways you can\'t.',
      },
    ],
    tags: ['social', 'identity', 'emotional'],
    isRepeatable: false,
    isMandatory: false,
    priority: 1,
  },
]

// ============ DAVID (H-1B) EVENTS ============

const DAVID_EVENTS: GameEvent[] = [
  {
    id: 'david_backlog_realization',
    title: 'The Backlog',
    description: 'You\'ve been checking the visa bulletin obsessively. Your priority date hasn\'t moved in months. You do the math again. At this rate... forty years. Maybe more. You\'ll be 69.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 24 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'david' },
      { type: 'flag', target: 'realized_backlog', operator: 'not-exists', value: true },
    ],
    weight: 80,
    characterIds: ['david'],
    choices: [
      {
        id: 'accept_reality',
        text: 'Accept the reality',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'flag-set', target: 'realized_backlog', value: true },
        ],
        outcomeText: 'You did everything right. Top of your class. Best schools. Best companies. And the system says: wait forty years. The American Dream has a forty-year queue.',
      },
      {
        id: 'explore_alternatives',
        text: 'Research alternatives',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'flag-set', target: 'realized_backlog', value: true },
          { type: 'flag-set', target: 'researching_eb1', value: true },
        ],
        outcomeText: 'EB-1A for "extraordinary ability"? The requirements seem impossible. NIW? Still years of backlog. Canada\'s Express Entry? Starting over. Each path has its own trap.',
      },
    ],
    tags: ['immigration', 'h1b', 'backlog'],
    isRepeatable: false,
    isMandatory: false,
    priority: 5,
  },
  {
    id: 'david_layoff_rumors',
    title: 'Layoff Rumors',
    description: 'Whispers in the office. Slack channels going quiet. Someone in your team got a calendar invite from HR. The tech industry is "right-sizing." Your 60-day clock could start any moment.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'david' },
    ],
    weight: 45,
    characterIds: ['david'],
    requiredStatuses: ['h1b-active'],
    choices: [
      {
        id: 'start_looking',
        text: 'Quietly start job searching',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
          { type: 'flag-set', target: 'job_searching', value: true },
        ],
        outcomeText: 'You update your LinkedIn. Reach out to recruiters. Every company wants to know about sponsorship. "We don\'t typically..." becomes a familiar phrase.',
      },
      {
        id: 'stay_focused',
        text: 'Keep your head down and work harder',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'stat-change', target: 'health', value: -5 },
        ],
        outcomeText: 'You work longer hours. Ship more code. Volunteer for extra projects. If they have to cut someone, it won\'t be you. It can\'t be.',
      },
      {
        id: 'talk_to_priya',
        text: 'Talk to Priya about contingency plans',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'relationship-change', target: 'priya', value: 5 },
        ],
        outcomeText: '"If it happens, we have 60 days," you tell her. "Find a new sponsor or leave." She nods. She gave up her engineering career for your visa. What would she do if you had to go back?',
        isRecommended: true,
      },
    ],
    tags: ['career', 'h1b', 'stress'],
    isRepeatable: true,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'david_priya_sacrifice',
    title: 'Priya\'s Sacrifice',
    description: 'You come home to find Priya crying. "I got another email from an old colleague. They started a company. They wanted me to join." She pauses. "As a co-founder." H-4 dependents can\'t work. Not anymore.',
    timing: { type: 'random', earliestMonth: 18, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'david' },
      { type: 'flag', target: 'priya_sacrifice_discussed', operator: 'not-exists', value: true },
    ],
    weight: 50,
    characterIds: ['david'],
    choices: [
      {
        id: 'comfort_her',
        text: 'Hold her and say nothing',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'relationship-change', target: 'priya', value: -5 },
          { type: 'flag-set', target: 'priya_sacrifice_discussed', value: true },
        ],
        outcomeText: 'What can you say? She was a software engineer. Now she spends her days waiting. Waiting for your green card. Waiting for her work permit. Waiting for her life to restart.',
      },
      {
        id: 'discuss_options',
        text: 'Discuss alternative paths',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'relationship-change', target: 'priya', value: 5 },
          { type: 'flag-set', target: 'priya_sacrifice_discussed', value: true },
          { type: 'flag-set', target: 'considering_return', value: true },
        ],
        outcomeText: '"We could go back," you say. "India\'s tech scene is booming. You could work." She looks at you. "After everything we went through to get here?" The silence stretches long.',
        isRecommended: true,
      },
    ],
    tags: ['relationship', 'h1b', 'h4', 'sacrifice'],
    isRepeatable: false,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'david_h1b_stamping',
    title: 'Visa Stamping',
    description: 'Your visa stamp is expiring. If you leave the country, you\'ll need to get it stamped at a consulate. That means waiting. Hoping. Not knowing if you can come back.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 36 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'david' },
      { type: 'flag', target: 'stamping_done', operator: 'not-exists', value: true },
    ],
    weight: 50,
    characterIds: ['david'],
    requiredStatuses: ['h1b-active'],
    choices: [
      {
        id: 'stay_put',
        text: 'Avoid international travel',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'flag-set', target: 'avoiding_travel', value: true },
        ],
        outcomeText: 'No conferences abroad. No visits home. You watch colleagues fly to India for weddings, funerals, festivals. You stay. You work. You wait.',
      },
      {
        id: 'risk_stamping',
        text: 'Go home and get the stamp',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 30 },
          { type: 'flag-set', target: 'stamping_pending', value: true },
          { type: 'queue-event', target: 'david_stamping_result', delayMonths: 1 },
        ],
        outcomeText: 'You book the ticket. Prepare the documents. The interview is at the US consulate. They can say no. They\'ve been saying no to more people lately. You go anyway.',
        isDangerous: true,
      },
    ],
    tags: ['immigration', 'travel', 'h1b'],
    isRepeatable: false,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'david_stamping_result',
    title: 'The Consulate',
    description: 'You wait outside the US consulate in Mumbai. Your number is called. The interview will determine if you can return to your life.',
    timing: { type: 'triggered' },
    conditions: [],
    weight: 0,
    characterIds: ['david'],
    choices: [
      {
        id: 'interview_complete',
        text: 'Complete the interview',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
          { type: 'flag-set', target: 'stamping_done', value: true },
          { type: 'flag-set', target: 'stamping_pending', value: false },
        ],
        outcomeText: '"Your visa has been approved." Three words. You can go home. Back to your apartment, your job, your American life. This time. Others in line aren\'t so lucky.',
      },
    ],
    tags: ['immigration', 'h1b', 'milestone'],
    isRepeatable: false,
    isMandatory: false,
    priority: 8,
  },
  {
    id: 'david_parent_illness',
    title: 'The Call From Home',
    description: 'Your mother\'s voice on the phone is thin. "Your father had a heart attack. He\'s stable but... we don\'t know how long." India is 12 hours away. And so are you.',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 72 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'david' },
    ],
    weight: 35,
    characterIds: ['david'],
    choices: [
      {
        id: 'go_immediately',
        text: 'Book the next flight',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
          { type: 'finance-subtract', target: 'Emergency Flight', value: 1800 },
          { type: 'flag-set', target: 'emergency_travel', value: true },
        ],
        outcomeText: 'You tell your manager. Pack a bag. Hope your visa stamp is still valid. Hope your job will be there when you return. Hope you make it in time.',
      },
      {
        id: 'wait_for_news',
        text: 'Wait for more information',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 35 },
          { type: 'relationship-change', target: 'family_india', value: -10 },
        ],
        outcomeText: 'You stare at your phone. Every hour without a call is good news and bad news at once. You\'re 8,000 miles away. You might as well be on the moon.',
        isDangerous: true,
      },
    ],
    tags: ['family', 'crisis', 'travel'],
    isRepeatable: true,
    isMandatory: false,
    priority: 5,
  },
  {
    id: 'david_promotion_dilemma',
    title: 'The Promotion',
    description: 'Your manager pulls you aside. "We want to promote you to Tech Lead. But..." But there\'s always a but. "The H-1B has job classification requirements. We\'d need to file an amendment."',
    timing: { type: 'random', earliestMonth: 18, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'david' },
      { type: 'flag', target: 'promotion_offered', operator: 'not-exists', value: true },
    ],
    weight: 45,
    characterIds: ['david'],
    requiredStatuses: ['h1b-active'],
    choices: [
      {
        id: 'accept_amendment',
        text: 'Accept and file the amendment ($1,500)',
        costs: [{ type: 'money', amount: 1500 }],
        requirements: [{ type: 'finance', target: 'balance', operator: '>=', value: 1500 }],
        outcomes: [
          { type: 'finance-subtract', target: 'H-1B Amendment', value: 1500 },
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'flag-set', target: 'promotion_offered', value: true },
          { type: 'flag-set', target: 'tech_lead', value: true },
        ],
        outcomeText: 'More paperwork. More fees. More waiting. But it\'s a promotion. Recognition that you\'re good at what you do. Even if the system makes it complicated.',
        isRecommended: true,
      },
      {
        id: 'decline',
        text: 'Decline the promotion',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'flag-set', target: 'promotion_offered', value: true },
        ],
        outcomeText: 'Too risky. What if USCIS denies the amendment? What if it delays your green card process? You stay in your lane. Watch others move up.',
      },
    ],
    tags: ['career', 'h1b', 'bureaucracy'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'david_eb1_dream',
    title: 'The EB-1 Path',
    description: 'Your immigration lawyer sends an email. "Given your publications and patents, you might qualify for EB-1A (Extraordinary Ability). No backlog. But the bar is extremely high."',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'david' },
      { type: 'flag', target: 'researching_eb1', operator: '==', value: true },
    ],
    weight: 40,
    characterIds: ['david'],
    choices: [
      {
        id: 'pursue_eb1',
        text: 'Pursue EB-1A application ($5,000 legal fees)',
        costs: [{ type: 'money', amount: 5000 }],
        requirements: [{ type: 'finance', target: 'balance', operator: '>=', value: 5000 }],
        outcomes: [
          { type: 'finance-subtract', target: 'EB-1A Legal Fees', value: 5000 },
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'flag-set', target: 'eb1_filed', value: true },
        ],
        outcomeText: '"Extraordinary ability." You review your achievements. Three patents. Published papers. Conference talks. Is it enough? The bar seems impossibly high.',
      },
      {
        id: 'stay_eb2',
        text: 'Stay in the EB-2 queue',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Forty years. Maybe. The math doesn\'t change. But at least you know where you stand. EB-1A rejection would mean starting over.',
      },
    ],
    tags: ['immigration', 'strategy', 'hope'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'david_american_child',
    title: 'Good News',
    description: 'Priya shows you the test. Two lines. You\'re going to be a father. The baby will be born here. American. Citizen. Everything you\'re waiting 40 years for, they\'ll have at birth.',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'david' },
      { type: 'flag', target: 'priya_pregnant', operator: 'not-exists', value: true },
    ],
    weight: 40,
    characterIds: ['david'],
    choices: [
      {
        id: 'joy',
        text: 'Embrace the joy',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
          { type: 'relationship-change', target: 'priya', value: 15 },
          { type: 'flag-set', target: 'priya_pregnant', value: true },
        ],
        outcomeText: 'You hold Priya. Laugh. Cry. This child will never know the anxiety of visa renewals. Never calculate backlog years. They\'ll belong. Completely. Automatically.',
        isRecommended: true,
      },
      {
        id: 'worry',
        text: 'Worry about the complications',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'flag-set', target: 'priya_pregnant', value: true },
        ],
        outcomeText: 'What if you\'re laid off during the pregnancy? What if you have to leave before the baby is born? Your child would be American. You wouldn\'t. You\'d be separated by a border.',
      },
    ],
    tags: ['family', 'milestone', 'hope'],
    isRepeatable: false,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'david_networking_event',
    title: 'The Networking Event',
    description: 'A tech networking event. Free food. Potential opportunities. But also the inevitable: "So what brings you to the US?" "Are you a citizen?"',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'david' },
    ],
    weight: 40,
    characterIds: ['david'],
    choices: [
      {
        id: 'attend_network',
        text: 'Go and network strategically',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'You collect business cards. Make small talk. When the visa question comes up, you\'ve learned to redirect: "I\'m focused on building great products." Most people move on.',
        isRecommended: true,
      },
      {
        id: 'skip_event',
        text: 'Skip it—not worth the questions',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'You stay home. Watch TV with Priya. Sometimes the energy isn\'t worth the potential. The next opportunity will come.',
      },
    ],
    tags: ['career', 'social', 'stress'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
]

// ============ FATIMA (ASYLUM) EVENTS ============

const FATIMA_EVENTS: GameEvent[] = [
  {
    id: 'fatima_ead_wait',
    title: 'The 180-Day Wait',
    description: 'You count the days. 180 days after filing before you can apply for work authorization. 180 days of nothing. Of waiting. Of watching your savings dwindle.',
    timing: { type: 'random', earliestMonth: 1, latestMonth: 6 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'fatima' },
      { type: 'flag', target: 'ead_clock_started', operator: 'not-exists', value: true },
    ],
    weight: 80,
    characterIds: ['fatima'],
    requiredStatuses: ['asylum-pending'],
    choices: [
      {
        id: 'count_days',
        text: 'Mark another day off the calendar',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'flag-set', target: 'ead_clock_started', value: true },
          { type: 'queue-event', target: 'fatima_ead_eligible', delayMonths: 6 },
        ],
        outcomeText: 'Each day feels like a week. You can\'t work. Can\'t contribute. Can\'t do anything but wait and remember and try not to think about what\'s happening back home.',
      },
    ],
    tags: ['immigration', 'asylum', 'waiting'],
    isRepeatable: false,
    isMandatory: false,
    priority: 5,
  },
  {
    id: 'fatima_ead_eligible',
    title: 'Work Authorization',
    description: 'The 180 days have passed. You can finally apply for an Employment Authorization Document. A chance to work. To support yourself. To feel useful again.',
    timing: { type: 'triggered' },
    conditions: [],
    weight: 0,
    characterIds: ['fatima'],
    choices: [
      {
        id: 'apply_ead',
        text: 'File for work authorization ($410)',
        costs: [{ type: 'money', amount: 410 }],
        requirements: [{ type: 'finance', target: 'balance', operator: '>=', value: 410 }],
        outcomes: [
          { type: 'finance-subtract', target: 'EAD Application Fee', value: 410 },
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'flag-set', target: 'ead_filed', value: true },
          { type: 'queue-event', target: 'fatima_ead_received', delayMonths: 4 },
        ],
        outcomeText: 'You file the application. More forms. More waiting. But this time, there\'s hope at the end. The chance to work again.',
      },
      {
        id: 'wait_longer',
        text: 'Wait - can\'t afford it right now',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
        ],
        outcomeText: 'The fee is $410. You don\'t have it. The irony burns: you can\'t work to earn the money to get the card that lets you work.',
        isDangerous: true,
      },
    ],
    tags: ['immigration', 'asylum', 'ead'],
    isRepeatable: false,
    isMandatory: false,
    priority: 8,
  },
  {
    id: 'fatima_ead_received',
    title: 'The Card Arrives',
    description: 'The envelope is thick. Inside: a card with your photo. Employment Authorization Document. You can work. After all this time, you can finally work.',
    timing: { type: 'triggered' },
    conditions: [],
    weight: 0,
    characterIds: ['fatima'],
    choices: [
      {
        id: 'celebrate',
        text: 'A moment of hope',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -30 },
          { type: 'flag-set', target: 'has_ead', value: true },
        ],
        outcomeText: 'You hold the card in your hands. It\'s not a green card. It\'s not permanence. But it\'s something. You can work. You can begin to rebuild.',
      },
    ],
    tags: ['immigration', 'asylum', 'ead', 'milestone'],
    isRepeatable: false,
    isMandatory: false,
    priority: 8,
  },
  {
    id: 'fatima_news_from_home',
    title: 'News From Home',
    description: 'A message from your cousin. "Your brother was taken. They came to his home at night." You stare at your phone. You can\'t call. You can\'t go back. You can do nothing.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'fatima' },
    ],
    weight: 40,
    characterIds: ['fatima'],
    choices: [
      {
        id: 'grieve',
        text: 'Grieve alone',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 30 },
          { type: 'stat-change', target: 'health', value: -10 },
          { type: 'flag-increment', target: 'family_lost', value: 1 },
        ],
        outcomeText: 'You cry in your small room. Everything you feared. Everything you fled. It found your family anyway. And you\'re here, safe, useless.',
      },
      {
        id: 'seek_support',
        text: 'Reach out to your community',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
          { type: 'flag-increment', target: 'family_lost', value: 1 },
        ],
        outcomeText: 'Others in your community have stories like this. Families left behind. Guilt and grief and helplessness. You\'re not alone. But it still hurts.',
        isRecommended: true,
      },
    ],
    tags: ['family', 'trauma', 'asylum'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'fatima_court_date',
    title: 'The Court Date',
    description: 'A letter from the immigration court. Your asylum hearing is scheduled. Three years from now. Until then, you wait. Exist. Remain in legal limbo.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 18 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'fatima' },
      { type: 'flag', target: 'court_date_set', operator: 'not-exists', value: true },
    ],
    weight: 70,
    characterIds: ['fatima'],
    requiredStatuses: ['asylum-pending'],
    choices: [
      {
        id: 'accept_wait',
        text: 'Mark your calendar',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'flag-set', target: 'court_date_set', value: true },
        ],
        outcomeText: 'Three years. 1,095 days. 26,280 hours. Each one uncertain. Each one wondering if they\'ll believe you. If you\'ll be safe. If you\'ll finally be able to stay.',
      },
    ],
    tags: ['immigration', 'asylum', 'waiting'],
    isRepeatable: false,
    isMandatory: false,
    priority: 5,
  },
  {
    id: 'fatima_job_search',
    title: 'The Job Hunt',
    description: 'With your EAD in hand, you can finally work. But explaining the gaps in your resume—the flight, the journey, the waiting—is its own challenge.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 24 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'fatima' },
      { type: 'flag', target: 'has_ead', operator: '==', value: true },
    ],
    weight: 60,
    characterIds: ['fatima'],
    choices: [
      {
        id: 'any_job',
        text: 'Take any work you can find',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'finance-add', target: 'First Job Income', value: 1800 },
          { type: 'flag-set', target: 'employed', value: true },
        ],
        outcomeText: 'The job is below your qualifications. Far below. You were a journalist. Now you stock shelves. But there is dignity in work. In earning. In not being dependent.',
        isRecommended: true,
      },
      {
        id: 'hold_out',
        text: 'Keep looking for something in your field',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'Journalism jobs want experience. American experience. References. Degrees that are recognized. Everything you built in Eritrea is invisible here.',
      },
    ],
    tags: ['career', 'asylum', 'restart'],
    isRepeatable: false,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'fatima_nightmare',
    title: 'The Nightmare',
    description: 'You wake at 3 AM, sweating. The same dream. The soldiers. The running. The faces of those who didn\'t make it. Sleep won\'t come again tonight.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 120 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'fatima' },
    ],
    weight: 40,
    characterIds: ['fatima'],
    choices: [
      {
        id: 'stay_awake',
        text: 'Stay awake until morning',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'stat-change', target: 'health', value: -5 },
        ],
        outcomeText: 'You make tea. Read. Watch the sky lighten. The memories fade in daylight. But they\'ll be back. They\'re always back.',
      },
      {
        id: 'seek_help',
        text: 'Consider seeking professional help',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'flag-set', target: 'considering_therapy', value: true },
        ],
        outcomeText: 'Trauma doesn\'t disappear just because you escaped the source. Maybe talking to someone would help. If you can find someone who understands. Who speaks your language.',
        isRecommended: true,
      },
    ],
    tags: ['trauma', 'health', 'emotional'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'fatima_community_center',
    title: 'The Community Center',
    description: 'Someone at the grocery store mentions a community center for East African refugees. "They have resources. English classes. People who understand."',
    timing: { type: 'random', earliestMonth: 3, latestMonth: 18 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'fatima' },
      { type: 'flag', target: 'found_community', operator: 'not-exists', value: true },
    ],
    weight: 55,
    characterIds: ['fatima'],
    choices: [
      {
        id: 'visit',
        text: 'Visit the community center',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
          { type: 'stat-change', target: 'communityConnection', value: 20 },
          { type: 'flag-set', target: 'found_community', value: true },
        ],
        outcomeText: 'The sound of Tigrinya. Coffee being served the Ethiopian way. Faces that carry the same weight. You\'re not home. But you\'re not alone.',
        isRecommended: true,
      },
      {
        id: 'isolate',
        text: 'Stay isolated for now',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You\'re not ready to share your story. Not ready to connect grief with grief. Sometimes solitude feels safer.',
      },
    ],
    tags: ['community', 'asylum', 'support'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'fatima_interview_prep',
    title: 'The Preparation',
    description: 'Your lawyer says you need to prepare for the asylum interview. "You\'ll have to tell your story. All of it. Every detail." The details you\'ve been trying to forget.',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'fatima' },
      { type: 'flag', target: 'court_date_set', operator: '==', value: true },
    ],
    weight: 50,
    characterIds: ['fatima'],
    choices: [
      {
        id: 'prepare',
        text: 'Begin preparing your testimony',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
          { type: 'stat-change', target: 'health', value: -10 },
          { type: 'flag-set', target: 'testimony_prepared', value: true },
        ],
        outcomeText: 'You write it all down. The threats. The beatings. The bodies. The government you exposed and the retribution that followed. Each word is a wound reopened.',
      },
    ],
    tags: ['asylum', 'legal', 'trauma'],
    isRepeatable: false,
    isMandatory: false,
    priority: 5,
  },
  {
    id: 'fatima_journalism_opportunity',
    title: 'A Familiar Voice',
    description: 'A small diaspora news website contacts you. "We heard you were a journalist back home. We can\'t pay much, but we could use someone who knows the truth of what\'s happening."',
    timing: { type: 'random', earliestMonth: 18, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'fatima' },
      { type: 'flag', target: 'has_ead', operator: '==', value: true },
    ],
    weight: 35,
    characterIds: ['fatima'],
    choices: [
      {
        id: 'accept_writing',
        text: 'Accept the writing opportunity',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 15 },
          { type: 'flag-set', target: 'writing_again', value: true },
        ],
        outcomeText: 'Your words have power again. You write about what you know. The diaspora. The waiting. The stories of others who fled. Your voice matters. Still.',
        isRecommended: true,
      },
      {
        id: 'decline_writing',
        text: 'Decline—too risky',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'What if the wrong people see your name? What if it affects your case? You fled because of your journalism. Perhaps it\'s time to stay quiet.',
      },
    ],
    tags: ['career', 'identity', 'hope'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'fatima_cannot_return',
    title: 'The Wedding Invitation',
    description: 'Your cousin is getting married. The message arrives with photos of preparations, of family gathering. "We wish you could be here." You cannot.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'fatima' },
    ],
    weight: 40,
    characterIds: ['fatima'],
    choices: [
      {
        id: 'send_money',
        text: 'Send a gift and a message',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'finance-subtract', target: 'Wedding Gift', value: 150 },
        ],
        outcomeText: 'You send what you can. Record a video of congratulations. Wonder if you\'ll ever dance at a family wedding again. Wonder if the faces you know will still be there when—if—you can return.',
      },
      {
        id: 'grieve_absence',
        text: 'Grieve what you\'re missing',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
        ],
        outcomeText: 'Life goes on without you. Children are born. People die. Weddings happen. You exist in photos and memories and voice notes. A ghost in your own family.',
      },
    ],
    tags: ['family', 'separation', 'emotional'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
]

// ============ ELENA (UNDOCUMENTED/USC SPOUSE) EVENTS ============

const ELENA_EVENTS: GameEvent[] = [
  {
    id: 'elena_lawyer_consultation',
    title: 'The Consultation',
    description: 'You finally saved enough for a lawyer consultation. $200 for one hour. One hour to understand your options.',
    timing: { type: 'random', earliestMonth: 3, latestMonth: 12 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
      { type: 'flag', target: 'met_lawyer', operator: 'not-exists', value: true },
    ],
    weight: 80,
    characterIds: ['elena'],
    choices: [
      {
        id: 'take_consultation',
        text: 'Pay for the consultation ($200)',
        costs: [{ type: 'money', amount: 200 }],
        requirements: [{ type: 'finance', target: 'balance', operator: '>=', value: 200 }],
        outcomes: [
          { type: 'finance-subtract', target: 'Lawyer Consultation', value: 200 },
          { type: 'flag-set', target: 'met_lawyer', value: true },
          { type: 'trigger-event', target: 'elena_lawyer_explains' },
        ],
        outcomeText: 'You walk into the office with hope. You walk out with understanding. The system isn\'t complicated. It\'s just designed to trap you.',
      },
      {
        id: 'wait_more',
        text: 'Wait until you have more money',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'Every month you wait is another month in uncertainty. But $200 is food for the kids. Medicine if someone gets sick. You wait.',
      },
    ],
    tags: ['immigration', 'legal', 'consultation'],
    isRepeatable: false,
    isMandatory: false,
    priority: 5,
  },
  {
    id: 'elena_lawyer_explains',
    title: 'The Catch-22',
    description: '"Let me explain your situation," the lawyer says. "You\'re married to a citizen. That should make things easy. But you crossed the border without inspection. That changes everything."',
    timing: { type: 'triggered' },
    conditions: [],
    weight: 0,
    characterIds: ['elena'],
    choices: [
      {
        id: 'listen',
        text: 'Listen to the explanation',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
          { type: 'flag-set', target: 'understands_catch22', value: true },
        ],
        outcomeText: '"To adjust status, you need to leave the country and apply at a consulate. But the moment you leave, you trigger a 10-year bar. You can apply for a waiver, but there\'s no guarantee. If it\'s denied..." The lawyer pauses. "You can\'t come back for ten years. Your children would grow up without you."',
      },
    ],
    tags: ['immigration', 'legal', 'trap'],
    isRepeatable: false,
    isMandatory: false,
    priority: 8,
  },
  {
    id: 'elena_children_question',
    title: 'Sofia Asks',
    description: '"Mommy, why can\'t you come to the school field trip?" Sofia asks. The trip is to Washington D.C. A bus. A checkpoint, maybe. Too much risk.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
    ],
    weight: 50,
    characterIds: ['elena'],
    choices: [
      {
        id: 'make_excuse',
        text: 'Make an excuse',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'flag-increment', target: 'missed_events', value: 1 },
        ],
        outcomeText: '"Mommy has to work, mija." The lie tastes bitter. She\'s only eight. How do you explain that crossing a state line could mean never seeing her again?',
      },
      {
        id: 'tell_truth',
        text: 'Try to explain, age-appropriately',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'flag-set', target: 'sofia_knows', value: true },
        ],
        outcomeText: '"There are some places Mommy can\'t go right now. The rules are... complicated." She looks at you with those big eyes. "That\'s not fair." No, mija. It\'s not.',
        isRecommended: true,
      },
    ],
    tags: ['family', 'children', 'sacrifice'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'elena_ice_neighborhood',
    title: 'The Vans',
    description: 'The text comes from your neighbor. "ICE vans on Oak Street. Stay inside." Your heart stops. Oak Street is three blocks away.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
    ],
    weight: 35,
    characterIds: ['elena'],
    requiredStatuses: ['undocumented'],
    choices: [
      {
        id: 'stay_hidden',
        text: 'Stay inside and wait',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 30 },
        ],
        outcomeText: 'You keep the blinds closed. The kids watch cartoons, oblivious. Every car that passes sounds like fate arriving. Hours later, the all-clear comes. This time.',
      },
      {
        id: 'warn_others',
        text: 'Warn others in your network',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'You text everyone you know. The network activates. People staying home. Staying quiet. Waiting. You\'re not alone, but you\'re all hiding.',
        isRecommended: true,
      },
    ],
    tags: ['immigration', 'enforcement', 'fear'],
    isRepeatable: true,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'elena_waiver_decision',
    title: 'The I-601A Decision',
    description: 'The lawyer has explained it all. The I-601A waiver. The extreme hardship standard. The gamble. File, leave, interview abroad. Risk everything for a chance at everything.',
    timing: { type: 'random', earliestMonth: 18, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
      { type: 'flag', target: 'understands_catch22', operator: '==', value: true },
    ],
    weight: 50,
    characterIds: ['elena'],
    choices: [
      {
        id: 'pursue_waiver',
        text: 'Begin the waiver process ($2,500 legal fees)',
        costs: [{ type: 'money', amount: 2500 }],
        requirements: [{ type: 'finance', target: 'balance', operator: '>=', value: 2500 }],
        outcomes: [
          { type: 'finance-subtract', target: 'I-601A Legal Fees', value: 2500 },
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'flag-set', target: 'waiver_started', value: true },
        ],
        outcomeText: 'You begin gathering evidence. Roberto\'s U.S. ties. The children\'s needs. Your community roots. Building a case that says: if she can\'t return, her American family will suffer extremely.',
      },
      {
        id: 'stay_undocumented',
        text: 'Stay as you are—too risky',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You know the risks of staying. But you also know the risks of leaving. At least here, you\'re with your children. That certainty is worth something.',
      },
    ],
    tags: ['immigration', 'legal', 'decision'],
    isRepeatable: false,
    isMandatory: false,
    priority: 5,
  },
  {
    id: 'elena_roberto_frustration',
    title: 'Roberto\'s Frustration',
    description: '"Why can\'t they just give you papers?" Roberto asks, again. "We\'re married! You\'re the mother of American children!" He doesn\'t understand. He tries, but he doesn\'t understand.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
    ],
    weight: 45,
    characterIds: ['elena'],
    choices: [
      {
        id: 'explain_again',
        text: 'Explain the system again',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'relationship-change', target: 'roberto', value: -5 },
        ],
        outcomeText: '"Entry without inspection means—" But you can see his eyes glaze. He married you, not your legal status. He just wants a normal life. You both do.',
      },
      {
        id: 'comfort_him',
        text: 'Comfort him instead',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'relationship-change', target: 'roberto', value: 5 },
        ],
        outcomeText: '"I know it\'s not fair." You hold him. "We\'ll figure it out." You don\'t know if that\'s true. But hope is all you have to offer.',
        isRecommended: true,
      },
    ],
    tags: ['relationship', 'marriage', 'system'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'elena_job_under_table',
    title: 'The Job Offer',
    description: 'A neighbor knows someone who needs help cleaning houses. Cash. No questions. It\'s not much, but it\'s something.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
      { type: 'flag', target: 'working_cash', operator: 'not-exists', value: true },
    ],
    weight: 55,
    characterIds: ['elena'],
    choices: [
      {
        id: 'take_job',
        text: 'Take the work',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'finance-add', target: 'Cash Work', value: 800 },
          { type: 'flag-set', target: 'working_cash', value: true },
        ],
        outcomeText: 'Three houses a week. $200 per. It\'s honest work. Hard work. Your hands crack in winter. But you contribute. You aren\'t just waiting.',
        isRecommended: true,
      },
      {
        id: 'decline_job',
        text: 'Decline—too much risk',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'Working without papers has its own risks. What if someone reports you? What if it comes up in an immigration interview? You stay home. You wait.',
      },
    ],
    tags: ['work', 'money', 'survival'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'elena_parent_teacher',
    title: 'Parent-Teacher Conference',
    description: 'Sofia\'s school wants to see you. Standard parent-teacher night. Simple. Except nothing is simple when every public appearance feels like exposure.',
    timing: { type: 'random', earliestMonth: 9, latestMonth: 36 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
    ],
    weight: 50,
    characterIds: ['elena'],
    choices: [
      {
        id: 'go_anyway',
        text: 'Go for Sofia',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'relationship-change', target: 'sofia', value: 10 },
        ],
        outcomeText: 'You drive carefully. Stay calm. The teacher praises Sofia\'s reading. Says she\'s bright, engaged, thriving. Your American daughter. You smile. You stay small.',
        isRecommended: true,
      },
      {
        id: 'send_roberto',
        text: 'Send Roberto alone',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'relationship-change', target: 'sofia', value: -5 },
        ],
        outcomeText: '"Why didn\'t Mommy come?" Sofia asks later. "She was tired, mija." Another small lie. Another moment of her childhood you can\'t fully participate in.',
      },
    ],
    tags: ['family', 'parenting', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'elena_church_sanctuary',
    title: 'The Sanctuary Church',
    description: 'A church in town has declared itself a sanctuary. "We do not cooperate with ICE." You wonder if that could be a refuge. Or if it\'s a prison with better PR.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
    ],
    weight: 35,
    characterIds: ['elena'],
    choices: [
      {
        id: 'visit_church',
        text: 'Visit the church',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 15 },
        ],
        outcomeText: 'The pastor welcomes you. Other families are there. Some have been living in the church for months. Afraid to step outside. It\'s safety and prison all at once.',
        isRecommended: true,
      },
      {
        id: 'keep_distance',
        text: 'Keep your distance',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Sanctuary sounds beautiful. But it also means never leaving. Never taking Sofia to the park. Never feeling the sun. You\'re not ready for that kind of safety.',
      },
    ],
    tags: ['community', 'immigration', 'survival'],
    isRepeatable: false,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'elena_driving_fear',
    title: 'The Traffic Stop',
    description: 'Police lights in your rearview mirror. Your heart stops. You were going the speed limit. You always do. But that\'s never been the point.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
    ],
    weight: 40,
    characterIds: ['elena'],
    choices: [
      {
        id: 'stay_calm',
        text: 'Stay calm, answer questions carefully',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
        ],
        outcomeText: '"License and registration." Your hands don\'t shake. You\'ve practiced this. The officer looks. Writes a warning for a broken taillight. Leaves. Your heart starts beating again.',
      },
    ],
    tags: ['fear', 'daily-life', 'enforcement'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'elena_mateo_soccer',
    title: 'Mateo\'s Game',
    description: 'Mateo has his first soccer game. He\'s five. He\'s terrible. He\'s glorious. Every other parent is there with cameras and cheering.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
    ],
    weight: 50,
    characterIds: ['elena'],
    choices: [
      {
        id: 'cheer_loud',
        text: 'Be there and cheer your heart out',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'relationship-change', target: 'mateo', value: 10 },
        ],
        outcomeText: 'He scores a goal. Runs to you with arms wide. "MOMMY DID YOU SEE?!" In this moment, there is no border. No status. Just your son. Just this joy.',
        isRecommended: true,
      },
    ],
    tags: ['family', 'parenting', 'joy'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'elena_roberto_new_job',
    title: 'Roberto\'s Opportunity',
    description: 'Roberto got a job offer. Better pay. Better benefits. The company is two states away. Moving means new everything. New risks. New exposure.',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 60 },
    conditions: [
      { type: 'character', target: 'id', operator: '==', value: 'elena' },
    ],
    weight: 40,
    characterIds: ['elena'],
    choices: [
      {
        id: 'research_state',
        text: 'Research the new state\'s policies',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'flag-set', target: 'considering_move', value: true },
        ],
        outcomeText: 'Some states are safer. Driver\'s licenses for undocumented. Sanctuary policies. Others... aren\'t. Your freedom depends on geography. On who won the last election.',
      },
      {
        id: 'stay_put',
        text: 'Tell Roberto to turn it down',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'relationship-change', target: 'roberto', value: -10 },
        ],
        outcomeText: '"We can\'t move. You know we can\'t." He sighs. Another sacrifice. Another opportunity lost because of a border crossing 13 years ago.',
      },
    ],
    tags: ['family', 'career', 'decision'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
]

// ============ SHARED EVENTS ============

const SHARED_EVENTS: GameEvent[] = [
  // Life Events
  {
    id: 'shared_medical_bill',
    title: 'Medical Emergency',
    description: 'You wake up with severe pain. The kind that makes you wonder if this is how it ends. You need to see a doctor.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 120 },
    conditions: [
      { type: 'stat', target: 'health', operator: '<', value: 70 },
    ],
    weight: 30,
    choices: [
      {
        id: 'er',
        text: 'Go to the Emergency Room',
        costs: [{ type: 'money', amount: 2500 }],
        outcomes: [
          { type: 'finance-subtract', target: 'Emergency Room Bill', value: 2500 },
          { type: 'stat-change', target: 'health', value: 30 },
          { type: 'stat-change', target: 'stress', value: -10 },
        ],
        outcomeText: 'The bill is staggering. But at least you know what was wrong. They caught it in time. You\'ll be okay. This time.',
      },
      {
        id: 'clinic',
        text: 'Find a community clinic',
        outcomes: [
          { type: 'finance-subtract', target: 'Clinic Visit', value: 150 },
          { type: 'stat-change', target: 'health', value: 20 },
          { type: 'stat-change', target: 'communityConnection', value: 5 },
        ],
        outcomeText: 'The wait is long, but the care is real. The sliding-scale fee saves you thousands. Sometimes the community takes care of its own.',
        isRecommended: true,
      },
      {
        id: 'ignore',
        text: 'Try to tough it out',
        outcomes: [
          { type: 'stat-change', target: 'health', value: -20 },
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'You spend days in bed. The uncertainty gnaws at you. Is it getting better? Worse? You can\'t afford to find out.',
        isDangerous: true,
      },
    ],
    tags: ['health', 'financial'],
    isRepeatable: true,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'shared_job_opportunity',
    title: 'A Better Opportunity',
    description: 'A friend mentions an opening. Better pay. Better conditions. But it would mean changes.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'pursue',
        text: 'Pursue the opportunity',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'flag-set', target: 'seeking_new_job', value: true },
        ],
        outcomeText: 'You update your resume. Prepare for interviews. Hope for the best. Change is scary, but staying in place is its own kind of prison.',
      },
      {
        id: 'stay',
        text: 'Stay where you are',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Better the devil you know. Stability matters. You can\'t take risks, not with everything else uncertain.',
      },
    ],
    tags: ['career', 'opportunity'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_holiday',
    title: 'The Holiday',
    description: 'The holiday approaches. Time for family. Time for celebration. Time to remember who you can\'t be with.',
    timing: { type: 'random', earliestMonth: 3, latestMonth: 120 },
    conditions: [],
    weight: 50,
    choices: [
      {
        id: 'celebrate',
        text: 'Celebrate with those who are here',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 5 },
        ],
        outcomeText: 'You gather with friends. With chosen family. With others who understand. The table isn\'t empty. It\'s just... different.',
        isRecommended: true,
      },
      {
        id: 'call_home',
        text: 'Video call family abroad',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'Their faces on the small screen. Aging. Changing. You see your mother\'s gray hair. Your father\'s slower movements. You can\'t hug them. You might never hug them again.',
      },
    ],
    tags: ['family', 'holiday', 'emotional'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_rent_increase',
    title: 'The Notice',
    description: 'A letter from the landlord. Rent is going up. Effective next month.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'accept',
        text: 'Accept the increase',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'flag-set', target: 'rent_increased', value: true },
        ],
        outcomeText: 'Moving is risky. Background checks. New landlords. Questions you don\'t want to answer. You\'ll find a way to make it work.',
      },
      {
        id: 'look_elsewhere',
        text: 'Start looking for cheaper housing',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'flag-set', target: 'housing_search', value: true },
        ],
        outcomeText: 'You browse listings in the evenings. Everything affordable is far from work. Everything close is too expensive. The housing market doesn\'t care about your situation.',
      },
    ],
    tags: ['housing', 'financial', 'stress'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_good_news',
    title: 'Small Victory',
    description: 'Something good happens. Not a solution to everything. Just... something good.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 120 },
    conditions: [
      { type: 'stat', target: 'stress', operator: '>', value: 40 },
    ],
    weight: 35,
    choices: [
      {
        id: 'enjoy',
        text: 'Let yourself feel it',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
          { type: 'stat-change', target: 'health', value: 5 },
        ],
        outcomeText: 'For a moment, just a moment, things feel okay. Not solved. Not permanent. But okay. You let yourself breathe.',
      },
    ],
    tags: ['positive', 'emotional'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  // Career Events
  {
    id: 'shared_coworker_bond',
    title: 'A Friend at Work',
    description: 'A coworker lingers after everyone else leaves. "You know, I really admire how hard you work." It\'s a small thing. It feels enormous.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'open_up',
        text: 'Share a little about your story',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'You don\'t tell everything. But you tell something. And they listen. Not with pity. With respect. It matters.',
        isRecommended: true,
      },
      {
        id: 'keep_distance',
        text: 'Keep the conversation surface-level',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'You smile. Thank them. Keep the walls up. It\'s safer that way. But sometimes safety is just another kind of lonely.',
      },
    ],
    tags: ['career', 'social', 'positive'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_workplace_conflict',
    title: 'The Difficult Coworker',
    description: 'A coworker makes a comment. Maybe ignorant. Maybe intentional. "Must be nice to take American jobs." Your face stays neutral. Your blood boils.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 72 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'confront',
        text: 'Address it directly',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'stat-change', target: 'communityConnection', value: 5 },
        ],
        outcomeText: '"I\'ve worked for everything I have." Your voice is steady. They look away. Nothing changes. Everything changes. You spoke.',
      },
      {
        id: 'let_go',
        text: 'Let it go',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You breathe. Let it pass. It\'s not worth the risk. The words sit in your stomach like stones.',
      },
      {
        id: 'document',
        text: 'Document the incident quietly',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'flag-increment', target: 'incidents_documented', value: 1 },
        ],
        outcomeText: 'You write down what happened. Date. Time. Witnesses. If it happens again, there will be a record.',
        isRecommended: true,
      },
    ],
    tags: ['career', 'conflict', 'discrimination'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_skill_recognition',
    title: 'Hidden Talents',
    description: 'Someone at work notices something you did. A small innovation. An efficiency improvement. "How did you learn to do that?"',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'share_background',
        text: 'Explain your background',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'stat-change', target: 'communityConnection', value: 5 },
        ],
        outcomeText: 'You tell them about your education. Your experience. Things that don\'t fit on a resume because the credentials don\'t translate. They look at you differently now.',
        isRecommended: true,
      },
    ],
    tags: ['career', 'recognition', 'identity'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_overtime_request',
    title: 'Extra Hours',
    description: 'Your supervisor asks if you can work extra hours this month. It\'s not really a question. But the money would help.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 50,
    choices: [
      {
        id: 'say_yes',
        text: 'Accept the extra hours',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'stat-change', target: 'health', value: -5 },
          { type: 'finance-add', target: 'Overtime', value: 400 },
        ],
        outcomeText: 'You come early. Stay late. The paycheck grows. Your body shrinks into itself. Everything costs something.',
      },
      {
        id: 'decline',
        text: 'Decline politely',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'You need your rest. Your life. But you wonder if they\'ll remember this when decisions are made.',
      },
    ],
    tags: ['career', 'money', 'balance'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  // Health Events
  {
    id: 'shared_dental_pain',
    title: 'The Toothache',
    description: 'A dull ache becomes sharp. Then throbbing. You know you should see a dentist. You also know what that costs.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 72 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'find_clinic',
        text: 'Find a low-cost dental clinic',
        outcomes: [
          { type: 'stat-change', target: 'health', value: 15 },
          { type: 'finance-subtract', target: 'Dental Care', value: 250 },
        ],
        outcomeText: 'The clinic has a waiting list. But they take you. The procedure hurts. The relief is profound. Health is wealth, they say. They\'re right.',
        isRecommended: true,
      },
      {
        id: 'manage_pain',
        text: 'Manage with painkillers',
        outcomes: [
          { type: 'stat-change', target: 'health', value: -10 },
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'Ibuprofen. Ice. Clove oil from a YouTube tutorial. The pain dulls. But it\'s still there. Problems don\'t solve themselves.',
      },
    ],
    tags: ['health', 'financial', 'access'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_mental_health',
    title: 'The Weight',
    description: 'Some days the weight is heavier. Getting out of bed feels impossible. The uncertainty presses down. Everything feels like too much.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 72 },
    conditions: [
      { type: 'stat', target: 'stress', operator: '>', value: 60 },
    ],
    weight: 40,
    choices: [
      {
        id: 'seek_help',
        text: 'Look for mental health support',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
          { type: 'stat-change', target: 'health', value: 10 },
        ],
        outcomeText: 'A community health center has a sliding scale. The therapist speaks your language. Sometimes in words. Always in understanding. You\'re not broken. You\'re overwhelmed.',
        isRecommended: true,
      },
      {
        id: 'push_through',
        text: 'Push through alone',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'stat-change', target: 'health', value: -5 },
        ],
        outcomeText: 'You\'ve survived worse. You tell yourself this. It\'s true. But survival isn\'t the same as living.',
      },
    ],
    tags: ['health', 'mental-health', 'support'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_preventive_care',
    title: 'The Checkup',
    description: 'You can\'t remember the last time you saw a doctor when you weren\'t sick. A community health fair is offering free screenings.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'get_screened',
        text: 'Get the screenings',
        outcomes: [
          { type: 'stat-change', target: 'health', value: 10 },
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'Blood pressure. Blood sugar. Basic labs. Everything looks okay. You didn\'t realize how much you were worried until the relief hit.',
        isRecommended: true,
      },
      {
        id: 'skip_it',
        text: 'Skip it—don\'t want to know',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'What you don\'t know can\'t hurt you. That\'s not actually true. But it feels true.',
      },
    ],
    tags: ['health', 'preventive', 'community'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  // Housing Events
  {
    id: 'shared_landlord_question',
    title: 'The Lease Renewal',
    description: 'Lease renewal time. More forms. More questions. "Social security number?" "Employment verification?" The paperwork trail grows.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'provide_documents',
        text: 'Provide what you can',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'You submit the forms. Hold your breath. The approval comes. Another year. Another set of walls that feel like yours, even when nothing is truly yours.',
      },
      {
        id: 'find_flexible_landlord',
        text: 'Look for a more flexible landlord',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'flag-set', target: 'housing_search', value: true },
        ],
        outcomeText: 'Word of mouth. Community networks. Someone who knows someone who doesn\'t ask too many questions. The shadow economy has its own infrastructure.',
      },
    ],
    tags: ['housing', 'bureaucracy', 'stress'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_neighbor_kindness',
    title: 'The Good Neighbor',
    description: 'Your neighbor knocks on the door. They have extra from their garden. Tomatoes. Peppers. Basil. "I thought you might like some."',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'accept_gratefully',
        text: 'Accept with gratitude',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'The tomatoes are still warm from the sun. You make dinner with them. It tastes like kindness. Like belonging. Like maybe this place could be home.',
        isRecommended: true,
      },
    ],
    tags: ['community', 'kindness', 'positive'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_apartment_issue',
    title: 'The Broken Heater',
    description: 'The heater is broken. It\'s getting cold. The landlord says they\'ll get to it. Next week. Maybe the week after.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'push_back',
        text: 'Press the landlord',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You call again. Leave messages. Finally, a repair person shows up. The heat comes on. You shouldn\'t have had to fight for basic habitability.',
      },
      {
        id: 'adapt',
        text: 'Buy a space heater yourself',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'finance-subtract', target: 'Space Heater', value: 50 },
        ],
        outcomeText: 'You don\'t want trouble. Don\'t want to be difficult. So you solve the problem yourself. The American way, you think bitterly.',
      },
    ],
    tags: ['housing', 'daily-life', 'problem'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  // Community Events
  {
    id: 'shared_cultural_event',
    title: 'Festival of Home',
    description: 'The community is organizing a cultural festival. Food. Music. Dancing. The things that remind you where you come from.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 50,
    choices: [
      {
        id: 'attend',
        text: 'Attend and participate',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
          { type: 'stat-change', target: 'communityConnection', value: 15 },
        ],
        outcomeText: 'The music. The food. Children dancing. Elders laughing. For a few hours, you\'re not defined by your papers. You\'re just... home.',
        isRecommended: true,
      },
      {
        id: 'help_organize',
        text: 'Help organize the event',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 20 },
        ],
        outcomeText: 'You set up tables. Coordinate volunteers. Translate for vendors. Community isn\'t just something you have. It\'s something you build.',
      },
    ],
    tags: ['community', 'culture', 'positive'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_mutual_aid',
    title: 'The Emergency Fund',
    description: 'A family in your community faces crisis. Medical bills. Legal fees. A car breakdown. The mutual aid network activates.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 72 },
    conditions: [
      { type: 'finance', target: 'balance', operator: '>=', value: 100 },
    ],
    weight: 35,
    choices: [
      {
        id: 'contribute',
        text: 'Contribute what you can ($50)',
        costs: [{ type: 'money', amount: 50 }],
        outcomes: [
          { type: 'finance-subtract', target: 'Mutual Aid', value: 50 },
          { type: 'stat-change', target: 'communityConnection', value: 15 },
        ],
        outcomeText: 'It\'s not much. But everyone gives a little. The little becomes a lot. The family gets through. That\'s how communities survive.',
        isRecommended: true,
      },
      {
        id: 'cant_afford',
        text: 'You can\'t spare anything right now',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'You wish you could help more. Maybe next time. You hope someone will be there when it\'s your turn to need.',
      },
    ],
    tags: ['community', 'mutual-aid', 'solidarity'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_know_your_rights',
    title: 'Know Your Rights',
    description: 'A community organization is hosting a "Know Your Rights" workshop. What to do if ICE comes to your door. What to say. What not to say.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'attend_workshop',
        text: 'Attend the workshop',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
          { type: 'flag-set', target: 'knows_rights', value: true },
        ],
        outcomeText: '"You have the right to remain silent. You don\'t have to open the door. Ask if they have a warrant signed by a judge." Knowledge is armor. Not perfect, but something.',
        isRecommended: true,
      },
      {
        id: 'skip_workshop',
        text: 'Skip it—you know enough',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'You\'ve heard the basics. But later, you wonder. Do you really know enough? Would you remember in a moment of panic?',
      },
    ],
    tags: ['community', 'legal', 'preparedness'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
  // Immigration Bureaucracy
  {
    id: 'shared_uscis_update',
    title: 'The Online Portal',
    description: 'You check the USCIS case status portal. Again. "Case is being actively reviewed." It has said this for months.',
    timing: { type: 'random', earliestMonth: 3, latestMonth: 60 },
    conditions: [],
    weight: 50,
    choices: [
      {
        id: 'check_obsessively',
        text: 'Refresh again',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'Nothing. Same message. Same uncertainty. The refresh button has worn smooth under your finger.',
      },
      {
        id: 'step_away',
        text: 'Step away from the portal',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'You close the browser. Make tea. Try to focus on something else. The case will update when it updates. Your watching doesn\'t speed it up.',
        isRecommended: true,
      },
    ],
    tags: ['immigration', 'waiting', 'bureaucracy'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_biometrics',
    title: 'Biometrics Appointment',
    description: 'A letter from USCIS. Biometrics appointment scheduled. Fingerprints. Photos. The government cataloging your existence.',
    timing: { type: 'random', earliestMonth: 3, latestMonth: 36 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'attend',
        text: 'Attend the appointment',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'flag-increment', target: 'biometrics_count', value: 1 },
        ],
        outcomeText: 'You take the day off work. Drive to the office. Wait in line. Press your fingers to the scanner. Smile for the camera. Another step. Progress, supposedly.',
      },
    ],
    tags: ['immigration', 'bureaucracy', 'milestone'],
    isRepeatable: true,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'shared_rfe',
    title: 'Request for Evidence',
    description: 'The thick envelope arrives. Your heart sinks. "Request for Evidence." They want more. More documents. More proof. More of you.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 30,
    choices: [
      {
        id: 'respond_carefully',
        text: 'Gather documents and respond ($500 legal fees)',
        costs: [{ type: 'money', amount: 500 }],
        outcomes: [
          { type: 'finance-subtract', target: 'RFE Response Legal', value: 500 },
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'flag-set', target: 'rfe_responded', value: true },
        ],
        outcomeText: 'Bank statements. Employment letters. Tax returns. Photos proving your relationship. Every piece of your life reduced to evidence. You compile. You submit. You wait.',
      },
    ],
    tags: ['immigration', 'legal', 'stress'],
    isRepeatable: true,
    isMandatory: false,
    priority: 5,
  },
  // Family Events
  {
    id: 'shared_video_call_home',
    title: 'Faces on a Screen',
    description: 'Sunday video call with family. Pixelated faces. Delayed audio. Everyone talking over each other. The distance compressed into 45 minutes.',
    timing: { type: 'random', earliestMonth: 3, latestMonth: 60 },
    conditions: [],
    weight: 55,
    choices: [
      {
        id: 'savor_moment',
        text: 'Savor every moment',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
        ],
        outcomeText: 'Your mother\'s laugh. Your father\'s jokes. Nieces and nephews you\'ve never held. You drink it in. Store it up for the week ahead.',
        isRecommended: true,
      },
      {
        id: 'feel_distance',
        text: 'Feel the painful distance',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'They\'re there. You\'re here. The screen is a window you can\'t climb through. After you hang up, the silence is louder.',
      },
    ],
    tags: ['family', 'emotional', 'connection'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_remittance_pressure',
    title: 'The Money Back Home',
    description: 'Your cousin calls. Things are hard back home. Could you send a little more this month? It\'s always a little more.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [
      { type: 'finance', target: 'balance', operator: '>=', value: 200 },
    ],
    weight: 45,
    choices: [
      {
        id: 'send_more',
        text: 'Send extra ($200)',
        costs: [{ type: 'money', amount: 200 }],
        outcomes: [
          { type: 'finance-subtract', target: 'Remittance Extra', value: 200 },
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'You wire the money. Watch your balance shrink. Feel the squeeze. They think you\'re rich here. They don\'t see the rent. The fees. The cost of living.',
      },
      {
        id: 'explain_limits',
        text: 'Explain you\'re stretched thin',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: '"I understand. I\'m sorry." They don\'t really understand. How could they? You feel guilty. You feel resentful. You feel guilty for feeling resentful.',
      },
    ],
    tags: ['family', 'money', 'pressure'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_death_abroad',
    title: 'The Phone Call',
    description: 'The call comes at 4 AM. The time zone gives it away before the words do. Someone is gone.',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 96 },
    conditions: [],
    weight: 25,
    choices: [
      {
        id: 'grieve_alone',
        text: 'Grieve from afar',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 30 },
          { type: 'stat-change', target: 'health', value: -10 },
        ],
        outcomeText: 'There will be no funeral for you. No last goodbye. No gathering of mourners who knew them like you did. You light a candle. You remember. You break, alone.',
      },
      {
        id: 'connect_with_others',
        text: 'Reach out to others who understand',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'Others have stood in this exact spot. Grieving across oceans. Missing the rituals. They hold space for you. It helps. Nothing heals this. But it helps.',
        isRecommended: true,
      },
    ],
    tags: ['family', 'loss', 'grief'],
    isRepeatable: true,
    isMandatory: false,
    priority: 4,
  },
  // Random/External Events
  {
    id: 'shared_election_anxiety',
    title: 'Election Night',
    description: 'The election results are coming in. Everything could change. Policies. Priorities. Your future. You watch the map fill in.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'watch_closely',
        text: 'Stay up watching results',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'flag-increment', target: 'elections_watched', value: 1 },
        ],
        outcomeText: 'County by county. State by state. Your fate in the hands of people who don\'t know you exist. Who debate your humanity in abstract terms.',
      },
      {
        id: 'protect_peace',
        text: 'Turn off the news',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You\'ll know tomorrow. The results won\'t change because you\'re watching. You go to bed. Sleep comes in fragments.',
        isRecommended: true,
      },
    ],
    tags: ['politics', 'stress', 'external'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_policy_change',
    title: 'Policy Shift',
    description: 'New administration. New rules. Everyone is parsing the language. "What does this mean for us?" The group chats are on fire.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'consult_lawyer',
        text: 'Consult with an immigration attorney',
        costs: [{ type: 'money', amount: 150 }],
        outcomes: [
          { type: 'finance-subtract', target: 'Legal Consultation', value: 150 },
          { type: 'stat-change', target: 'stress', value: -10 },
        ],
        outcomeText: '"The policy doesn\'t directly affect your case." The lawyer explains the nuances. Interpretation. Implementation. Nothing is ever simple. But at least you understand.',
        isRecommended: true,
      },
      {
        id: 'wait_and_see',
        text: 'Wait and see what happens',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'Everyone has an opinion. Twitter explodes. Reddit threads multiply. You try to filter signal from noise. The uncertainty is exhausting.',
      },
    ],
    tags: ['politics', 'immigration', 'uncertainty'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_news_story',
    title: 'The News Story',
    description: 'A viral video. A raid. A family separated. The news covers it for one cycle. Your community lives it every day.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'share_story',
        text: 'Share the story on social media',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'stat-change', target: 'communityConnection', value: 5 },
        ],
        outcomeText: 'People need to see. Need to know. Your friends share. Some don\'t understand. Some do. The awareness spreads. Nothing changes. Everything changes.',
      },
      {
        id: 'protect_yourself',
        text: 'Protect your mental health',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'You can\'t carry every story. You\'re already carrying your own. You scroll past. Feel guilty. Keep scrolling. Survival requires boundaries.',
        isRecommended: true,
      },
    ],
    tags: ['politics', 'media', 'community'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_scam_warning',
    title: 'The Scam',
    description: 'Someone in your community was scammed. A "notario" promised to fix their papers. Took $5,000. Disappeared. It happens too often.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 30,
    choices: [
      {
        id: 'spread_word',
        text: 'Spread the warning',
        outcomes: [
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'You tell everyone you know. Only licensed attorneys. Never notarios. Never "guaranteed" outcomes. The predators are everywhere, feeding on hope.',
        isRecommended: true,
      },
      {
        id: 'check_your_own',
        text: 'Double-check your own legal help',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You verify credentials. Check bar associations. Make sure the person handling your case is real. The paranoia is exhausting but necessary.',
      },
    ],
    tags: ['community', 'warning', 'legal'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_american_milestone',
    title: 'The American Dream, Sort Of',
    description: 'Something quintessentially American happens. A backyard barbecue invitation. A Super Bowl party. Thanksgiving with neighbors. You belong. Almost.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'participate_fully',
        text: 'Join in fully',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'You bring a dish from home. They love it. You learn about football. They ask about your holidays. For an afternoon, borders don\'t exist.',
        isRecommended: true,
      },
      {
        id: 'feel_outsider',
        text: 'Feel like an outsider',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'You smile. You nod. You don\'t understand the jokes. The references. The easy assumption of permanence. You\'re here. But you\'re not sure you\'re home.',
      },
    ],
    tags: ['culture', 'belonging', 'positive'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_savings_milestone',
    title: 'The Savings Milestone',
    description: 'You check your bank account. For the first time in years, there\'s a cushion. Not much. But something.',
    timing: { type: 'random', earliestMonth: 18, latestMonth: 72 },
    conditions: [
      { type: 'finance', target: 'balance', operator: '>=', value: 2000 },
    ],
    weight: 30,
    choices: [
      {
        id: 'feel_proud',
        text: 'Feel proud of your progress',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
        ],
        outcomeText: 'Every penny saved while paying rent. While sending money home. While paying immigration fees. You built this. It\'s yours. It means security.',
        isRecommended: true,
      },
      {
        id: 'worry_about_future',
        text: 'Worry it\'s not enough',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Legal fees could wipe this out. A medical emergency. A job loss. The cushion feels thin. But it\'s still something.',
      },
    ],
    tags: ['financial', 'milestone', 'positive'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_language_moment',
    title: 'The Language',
    description: 'You dream in English now. Write shopping lists in English. Think in English. When did that happen? When did home\'s language become effort?',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 72 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'embrace_change',
        text: 'Accept the evolution',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'You\'re not replacing one self with another. You\'re expanding. Both languages live in you. Both homes. The mixing is natural.',
        isRecommended: true,
      },
      {
        id: 'mourn_loss',
        text: 'Mourn what\'s fading',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You call your mother. Speak in the old tongue. The words come slower now. Something is being lost. Assimilation has its costs.',
      },
    ],
    tags: ['identity', 'culture', 'change'],
    isRepeatable: false,
    isMandatory: false,
    priority: 1,
  },
  // Additional Career Events
  {
    id: 'shared_performance_review',
    title: 'The Review',
    description: 'Annual performance review time. Your manager has feedback. Your stomach knots. One bad review could start a chain reaction.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'receive_positive',
        text: 'Receive the feedback',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
          { type: 'finance-add', target: 'Performance Bonus', value: 500 },
        ],
        outcomeText: '"Exceeds expectations." You exhale. The bonus is nice. But really it\'s the security. Another year of proof that you belong here.',
        isRecommended: true,
      },
    ],
    tags: ['career', 'milestone', 'stress'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_workplace_friend_leaves',
    title: 'The Departure',
    description: 'Your closest work friend is leaving. New job. New city. The one person who understood is moving on.',
    timing: { type: 'random', earliestMonth: 18, latestMonth: 60 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'celebrate_them',
        text: 'Celebrate their opportunity',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'stat-change', target: 'communityConnection', value: -5 },
        ],
        outcomeText: 'You throw them a small goodbye party. Exchange numbers. Promise to keep in touch. People flow through your life. You\'ve learned not to grip too tightly.',
        isRecommended: true,
      },
    ],
    tags: ['career', 'social', 'change'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_new_skill',
    title: 'The Online Course',
    description: 'A free online course could help your career. Programming. Marketing. English business writing. Learning never stops.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'take_course',
        text: 'Enroll and commit to learning',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'flag-increment', target: 'skills_learned', value: 1 },
        ],
        outcomeText: 'Late nights after work. Weekends in front of a laptop. The certificate means nothing official. The knowledge means everything.',
        isRecommended: true,
      },
      {
        id: 'no_time',
        text: 'No time right now',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 0 },
        ],
        outcomeText: 'You save the link. Add it to the list. Maybe next month. The list grows longer.',
      },
    ],
    tags: ['career', 'growth', 'education'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_side_hustle',
    title: 'The Side Hustle',
    description: 'A friend suggests a side business. Driving. Delivery. Tutoring. Extra money. Extra exhaustion.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'start_side_work',
        text: 'Give it a try',
        outcomes: [
          { type: 'stat-change', target: 'health', value: -5 },
          { type: 'finance-add', target: 'Side Income', value: 300 },
        ],
        outcomeText: 'Every spare hour becomes work. The money adds up. So does the fatigue. But the immigration fees won\'t pay themselves.',
      },
      {
        id: 'protect_rest',
        text: 'Protect your rest',
        outcomes: [
          { type: 'stat-change', target: 'health', value: 5 },
        ],
        outcomeText: 'You need downtime. Need sleep. Need to not be working every moment. Rest is not laziness. It\'s survival.',
        isRecommended: true,
      },
    ],
    tags: ['career', 'money', 'health'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  // Additional Health Events
  {
    id: 'shared_flu_season',
    title: 'Under the Weather',
    description: 'The seasonal flu hits you hard. You should rest. But missing work means missing money. Missing money means...',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'take_sick_day',
        text: 'Take time to recover',
        outcomes: [
          { type: 'stat-change', target: 'health', value: 20 },
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You stay home. Sleep. Heal. The lost wages hurt. But dragging yourself to work would hurt more.',
        isRecommended: true,
      },
      {
        id: 'push_through',
        text: 'Go to work anyway',
        outcomes: [
          { type: 'stat-change', target: 'health', value: -10 },
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'You mask up. Work through the fever. Your body screams for rest. You ignore it. There\'s no choice.',
      },
    ],
    tags: ['health', 'work', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_exercise_discovery',
    title: 'Moving Forward',
    description: 'Someone invites you to their running group. Walking club. Free yoga in the park. Movement as medicine.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'join_group',
        text: 'Join them',
        outcomes: [
          { type: 'stat-change', target: 'health', value: 15 },
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'Early mornings. Fresh air. Your body remembers what it can do. The group becomes friends. Movement becomes meditation.',
        isRecommended: true,
      },
      {
        id: 'decline_exercise',
        text: 'Not for you right now',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 0 },
        ],
        outcomeText: 'Too much going on. Too tired. Maybe later. The invitation stays open.',
      },
    ],
    tags: ['health', 'community', 'positive'],
    isRepeatable: false,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_chronic_worry',
    title: 'The Worry That Won\'t Leave',
    description: 'The anxiety is getting worse. Heart racing at random times. Trouble sleeping. The body keeps score of every uncertainty.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 72 },
    conditions: [
      { type: 'stat', target: 'stress', operator: '>', value: 50 },
    ],
    weight: 35,
    choices: [
      {
        id: 'address_it',
        text: 'Acknowledge and address it',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'flag-set', target: 'addressing_anxiety', value: true },
        ],
        outcomeText: 'You start small. Breathing exercises. Walking. Talking. The anxiety isn\'t weakness. It\'s a normal response to abnormal circumstances.',
        isRecommended: true,
      },
      {
        id: 'suppress_it',
        text: 'Suppress and soldier on',
        outcomes: [
          { type: 'stat-change', target: 'health', value: -10 },
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You push it down. Ignore the racing heart. The churning stomach. Keep moving. The body will break before the will does.',
      },
    ],
    tags: ['health', 'mental-health', 'stress'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  // Additional Housing Events
  {
    id: 'shared_roommate_issue',
    title: 'The Roommate',
    description: 'Sharing space with others is complicated. Bills. Noise. Different habits. The small frictions of living together.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'communicate',
        text: 'Have an honest conversation',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'You talk. They listen. Some things change. Some don\'t. But at least it\'s out in the open.',
        isRecommended: true,
      },
      {
        id: 'avoid_conflict',
        text: 'Avoid the confrontation',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You need this place. Can\'t rock the boat. You swallow the frustration. Again.',
      },
    ],
    tags: ['housing', 'relationships', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_home_cooked',
    title: 'The Taste of Home',
    description: 'You spend Sunday cooking. The smells fill your small kitchen. For a moment, you\'re back in your mother\'s house.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 50,
    choices: [
      {
        id: 'share_meal',
        text: 'Invite someone to share',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'A friend comes over. You serve the meal. Tell the stories behind the recipes. Food is memory. Sharing is love.',
        isRecommended: true,
      },
      {
        id: 'eat_alone',
        text: 'Enjoy it quietly alone',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
        ],
        outcomeText: 'Sometimes solitude is a gift. You eat slowly. Savor each bite. Miss what you miss. Keep what you can.',
      },
    ],
    tags: ['culture', 'home', 'positive'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  // Additional Community Events
  {
    id: 'shared_protest',
    title: 'The March',
    description: 'A march for immigrant rights. Your community is organizing. The signs say: "No human is illegal." "We are here."',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 30,
    choices: [
      {
        id: 'join_march',
        text: 'Join the march',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'stat-change', target: 'communityConnection', value: 20 },
          { type: 'flag-increment', target: 'activism_count', value: 1 },
        ],
        outcomeText: 'Thousands of people. Chants in multiple languages. The solidarity is overwhelming. You exist. You matter. You\'re not invisible.',
      },
      {
        id: 'support_quietly',
        text: 'Support from the sidelines',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'stat-change', target: 'communityConnection', value: 5 },
        ],
        outcomeText: 'You watch from a distance. Take photos. Share on social media. Participation takes many forms.',
        isRecommended: true,
      },
    ],
    tags: ['community', 'politics', 'solidarity'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_newcomer',
    title: 'The New Arrival',
    description: 'A new person in your community. Fresh from the journey. The fear in their eyes is familiar. You remember feeling that way.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'offer_help',
        text: 'Offer guidance and help',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 15 },
        ],
        outcomeText: 'You share what you know. The resources. The warnings. The hope. Someone did this for you once. Now you pay it forward.',
        isRecommended: true,
      },
      {
        id: 'keep_distance',
        text: 'Keep your distance',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 0 },
        ],
        outcomeText: 'You have your own survival to manage. You can\'t carry everyone. The guilt sits quietly.',
      },
    ],
    tags: ['community', 'solidarity', 'mentorship'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_worship',
    title: 'The Congregation',
    description: 'A religious service. A meditation group. A gathering of faith. Whatever form it takes, it offers something steady.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'attend',
        text: 'Attend and participate',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'The ritual. The community. The sense of something larger. Whatever you believe, the grounding helps. You\'re part of something ancient and ongoing.',
        isRecommended: true,
      },
    ],
    tags: ['community', 'spiritual', 'support'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  // Additional Family Events
  {
    id: 'shared_child_milestone',
    title: 'Growing Up',
    description: 'Your child takes a first step. Says a first word. Brings home a first report card. Time moves faster than paperwork.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'celebrate',
        text: 'Celebrate the moment',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
        ],
        outcomeText: 'You record it. Save it. Call family to share. These are the moments that make everything else worth it. The growing. The becoming.',
        isRecommended: true,
      },
    ],
    tags: ['family', 'milestone', 'joy'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_family_disagreement',
    title: 'The Argument',
    description: 'A family disagreement. About money. About choices. About staying or going. Love doesn\'t prevent friction.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'talk_through',
        text: 'Work through it together',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'relationship-change', target: 'family', value: 5 },
        ],
        outcomeText: 'The conversation is hard. Voices raise. Then lower. Understanding comes slowly. But it comes. Family bends without breaking.',
        isRecommended: true,
      },
      {
        id: 'need_space',
        text: 'Take some space',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'Sometimes distance helps. You cool off. They cool off. The issue doesn\'t disappear, but the heat does.',
      },
    ],
    tags: ['family', 'conflict', 'relationships'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_elder_care',
    title: 'From Afar',
    description: 'Your parent back home needs care. Medical attention. Daily help. You send money. But money can\'t replace presence.',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 72 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'arrange_care',
        text: 'Arrange care and send extra money',
        costs: [{ type: 'money', amount: 300 }],
        outcomes: [
          { type: 'finance-subtract', target: 'Elder Care Support', value: 300 },
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You coordinate with siblings. Hire help. Pay for doctors. From 8,000 miles away, you do what you can. It never feels like enough.',
      },
      {
        id: 'do_what_you_can',
        text: 'Do what you can with limited resources',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
        ],
        outcomeText: 'You\'re stretched thin. Can\'t give more. The guilt is constant. You\'re here because you wanted a better future. But the present moment back home weighs heavy.',
      },
    ],
    tags: ['family', 'responsibility', 'sacrifice'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  // Additional Immigration Events
  {
    id: 'shared_lawyer_meeting',
    title: 'The Strategy Session',
    description: 'Time to meet with your immigration lawyer. Review the case. Discuss options. Each meeting costs money and emotional energy.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'attend_meeting',
        text: 'Meet and discuss strategy ($200)',
        costs: [{ type: 'money', amount: 200 }],
        outcomes: [
          { type: 'finance-subtract', target: 'Legal Consultation', value: 200 },
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: '"Your case is progressing normally." Normal means years. Normal means uncertainty. But at least you understand where you stand.',
        isRecommended: true,
      },
    ],
    tags: ['immigration', 'legal', 'strategy'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_document_gathering',
    title: 'The Paper Chase',
    description: 'More documents needed. Birth certificates. Police records. School transcripts. From a country you can\'t return to. In a language that needs translation.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'track_down_documents',
        text: 'Track down what you need',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'finance-subtract', target: 'Document Translation', value: 100 },
          { type: 'flag-set', target: 'documents_gathered', value: true },
        ],
        outcomeText: 'You contact relatives. Pay for official copies. Pay for certified translations. Your life reduced to notarized papers in manila folders.',
      },
    ],
    tags: ['immigration', 'bureaucracy', 'documents'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_green_card_hope',
    title: 'Light at the End',
    description: 'A case update. Progress. Movement. After years of waiting, something is actually happening.',
    timing: { type: 'random', earliestMonth: 36, latestMonth: 96 },
    conditions: [],
    weight: 20,
    choices: [
      {
        id: 'cautious_hope',
        text: 'Allow yourself cautious hope',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
          { type: 'flag-set', target: 'case_advancing', value: true },
        ],
        outcomeText: '"Interview scheduled." Two words that change everything. Years of waiting leading to one moment. You prepare. You hope. You dare to imagine permanence.',
        isRecommended: true,
      },
    ],
    tags: ['immigration', 'milestone', 'hope'],
    isRepeatable: false,
    isMandatory: false,
    priority: 5,
  },
  // Random Life Events
  {
    id: 'shared_unexpected_kindness',
    title: 'The Stranger',
    description: 'A stranger does something unexpectedly kind. Pays for your coffee. Holds a door. Says something that lands exactly right.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [
      { type: 'stat', target: 'stress', operator: '>', value: 30 },
    ],
    weight: 40,
    choices: [
      {
        id: 'accept_grace',
        text: 'Accept the grace',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
        ],
        outcomeText: 'Small kindnesses matter. They\'re reminders that most people are decent. That you\'re not invisible. That connection happens in unexpected places.',
        isRecommended: true,
      },
    ],
    tags: ['positive', 'kindness', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_car_trouble',
    title: 'The Breakdown',
    description: 'Your car sputters. Stops. The mechanic\'s estimate is more than you expected. But without a car, you can\'t get to work.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'pay_repair',
        text: 'Pay for the repair ($400)',
        costs: [{ type: 'money', amount: 400 }],
        outcomes: [
          { type: 'finance-subtract', target: 'Car Repair', value: 400 },
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'The savings take a hit. But the car runs. In a city without good public transit, mobility is survival.',
      },
      {
        id: 'minimum_fix',
        text: 'Get the minimum fix possible',
        outcomes: [
          { type: 'finance-subtract', target: 'Car Repair', value: 150 },
          { type: 'flag-set', target: 'car_fragile', value: true },
        ],
        outcomeText: 'Patch it together. Hope it holds. Drive carefully. Cross fingers at every red light.',
      },
    ],
    tags: ['financial', 'transportation', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_weather_disaster',
    title: 'The Storm',
    description: 'A hurricane. A flood. A heat wave. Extreme weather doesn\'t check immigration status before striking.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 25,
    choices: [
      {
        id: 'weather_it',
        text: 'Get through it',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'The community comes together. Sharing resources. Checking on each other. Disaster doesn\'t discriminate. Neither does solidarity.',
      },
    ],
    tags: ['crisis', 'community', 'external'],
    isRepeatable: true,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'shared_found_money',
    title: 'The Windfall',
    description: 'An unexpected refund. A bonus. A gift from a relative. For once, money flows toward you instead of away.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 72 },
    conditions: [],
    weight: 25,
    choices: [
      {
        id: 'save_it',
        text: 'Put it all in savings',
        outcomes: [
          { type: 'finance-add', target: 'Unexpected Income', value: 500 },
          { type: 'stat-change', target: 'stress', value: -10 },
        ],
        outcomeText: 'Emergency fund grows. Security feels slightly less fragile. You resist the urge to spend on wants. Needs always come first.',
        isRecommended: true,
      },
      {
        id: 'treat_yourself',
        text: 'Allow yourself a small treat',
        outcomes: [
          { type: 'finance-add', target: 'Unexpected Income', value: 350 },
          { type: 'stat-change', target: 'stress', value: -15 },
        ],
        outcomeText: 'A nice meal. New clothes. Something just for you. It\'s been so long since you weren\'t only surviving. This counts too.',
      },
    ],
    tags: ['financial', 'positive', 'opportunity'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_library_discovery',
    title: 'The Library',
    description: 'You discover your local library. Free books. Free WiFi. Free classes. A sanctuary that asks nothing of you.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'become_regular',
        text: 'Become a regular visitor',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
          { type: 'flag-set', target: 'library_patron', value: true },
        ],
        outcomeText: 'A quiet corner. Books in your native language. ESL classes. Citizenship prep courses. The library doesn\'t check status. It only asks that you return the books on time.',
        isRecommended: true,
      },
    ],
    tags: ['community', 'resource', 'positive'],
    isRepeatable: false,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_media_representation',
    title: 'The Movie',
    description: 'A film about immigrants. Maybe it gets it right. Maybe it doesn\'t. Either way, your story is on screen. Sort of.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 30,
    choices: [
      {
        id: 'watch_it',
        text: 'Watch and reflect',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Some parts ring true. Some feel like Hollywood fantasy. You\'re glad the story is being told. Wish it didn\'t need to be dramatized. It\'s dramatic enough in real life.',
      },
      {
        id: 'skip_it',
        text: 'Skip it—you live it every day',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'You don\'t need entertainment that mirrors your stress. You\'ll watch a comedy instead. Escape is also valid.',
        isRecommended: true,
      },
    ],
    tags: ['culture', 'media', 'identity'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_anniversary',
    title: 'The Anniversary',
    description: 'Another year since you arrived. You remember the first day. The confusion. The hope. How much has changed.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'mark_occasion',
        text: 'Mark the occasion',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'You\'ve built something here. Despite everything. Because of everything. The journey continues, but this moment matters. You made it this far.',
        isRecommended: true,
      },
      {
        id: 'let_it_pass',
        text: 'Let it pass quietly',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'It\'s just another day. The wait continues. Counting years feels like counting scars. Better to focus forward.',
      },
    ],
    tags: ['milestone', 'reflection', 'identity'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_dream_of_home',
    title: 'The Dream',
    description: 'You dream of home. The streets. The sounds. The smell of morning. You wake with an ache that has no treatment.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'hold_memory',
        text: 'Hold the memory close',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Home lives in you. The place you carry. Not the same as being there. But not nothing either. You belong to somewhere, even from here.',
      },
      {
        id: 'focus_present',
        text: 'Focus on the present',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'This is home now. Or becoming home. You shake off the dream. Make coffee. Start the day. The past is the past. This is what\'s real.',
        isRecommended: true,
      },
    ],
    tags: ['emotional', 'nostalgia', 'home'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  // Additional Life Events
  {
    id: 'shared_birthday_alone',
    title: 'Your Birthday',
    description: 'Another birthday. Another year older. Your family sends videos from across the world. It\'s not the same as being together.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'celebrate_here',
        text: 'Celebrate with friends here',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'A small gathering. A cake. People who\'ve become family. You blow out the candles. Wish for things you can\'t say out loud.',
        isRecommended: true,
      },
      {
        id: 'quiet_day',
        text: 'Spend it quietly',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Just another day. You work. You come home. Watch the birthday videos alone. Some years are for celebrating. Some are for surviving.',
      },
    ],
    tags: ['personal', 'emotional', 'milestone'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_public_transit',
    title: 'The Commute',
    description: 'The daily commute. Buses, trains, walking. Hours of your life spent in transit. You\'ve learned to use the time.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'use_time_well',
        text: 'Make the most of it',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'flag-increment', target: 'books_read', value: 1 },
        ],
        outcomeText: 'Podcasts in your native language. Books on your phone. The commute becomes study time. You\'ve read more this year than any other.',
        isRecommended: true,
      },
      {
        id: 'zone_out',
        text: 'Zone out and rest',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'Headphones in. Music on. Watch the city pass by. Sometimes your brain just needs to idle.',
      },
    ],
    tags: ['daily-life', 'routine', 'time'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_grocery_store',
    title: 'The International Aisle',
    description: 'You find a grocery store that carries food from home. Real spices. Real flavors. Prices are high but the taste is priceless.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'stock_up',
        text: 'Stock up on essentials',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
          { type: 'finance-subtract', target: 'Specialty Groceries', value: 50 },
        ],
        outcomeText: 'The smell of familiar spices fills your kitchen. For the price of a meal out, you can cook a dozen meals that taste like belonging.',
        isRecommended: true,
      },
    ],
    tags: ['culture', 'food', 'positive'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_social_media_trap',
    title: 'The Algorithm',
    description: 'Social media shows you images of home. Old friends. Places you can\'t visit. The algorithm knows what you miss.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'scroll_anyway',
        text: 'Keep scrolling through memories',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'Friends getting married. Children growing up. Life continuing without you. The highlight reel of a life you can\'t have.',
      },
      {
        id: 'put_phone_down',
        text: 'Put the phone down',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'Your life is here. Now. The screen shows the past you can\'t return to. Better to tend to the present.',
        isRecommended: true,
      },
    ],
    tags: ['technology', 'emotional', 'nostalgia'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_english_milestone',
    title: 'The Compliment',
    description: '"Your English is so good!" they say. You\'re not sure if it\'s a compliment or a surprise. Both, probably.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'take_pride',
        text: 'Take pride in your progress',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'You worked hard for this. Late nights with grammar books. Embarrassing mistakes in public. Every word is a victory.',
        isRecommended: true,
      },
      {
        id: 'feel_othered',
        text: 'Feel the subtle othering',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'No one tells native speakers their English is good. The compliment carries surprise. Surprise that you can speak. That you belong here.',
      },
    ],
    tags: ['language', 'identity', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_bank_account',
    title: 'The Account',
    description: 'Time to open a bank account. Or renew one. The questions about identification. The hesitation at the counter.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'navigate_system',
        text: 'Navigate the system carefully',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'Different banks have different rules. Some ask more questions. Some ask fewer. You learn which ones work for people like you.',
      },
    ],
    tags: ['financial', 'bureaucracy', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_apartment_hunt',
    title: 'The Search',
    description: 'Looking for a new place to live. Credit checks. References. The apartment hunt is an obstacle course.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'formal_search',
        text: 'Search through formal channels',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
        ],
        outcomeText: 'Applications denied. Questions about documentation. The system isn\'t designed for you. But you persist.',
      },
      {
        id: 'community_network',
        text: 'Search through community networks',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'stat-change', target: 'communityConnection', value: 5 },
        ],
        outcomeText: 'Word of mouth. Someone knows someone. A landlord who doesn\'t ask too many questions. The informal economy has its advantages.',
        isRecommended: true,
      },
    ],
    tags: ['housing', 'search', 'community'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_credit_building',
    title: 'Building History',
    description: 'Building credit in America. A secured card. Small purchases. On-time payments. Building a history from scratch.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'careful_building',
        text: 'Build credit carefully',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'flag-set', target: 'building_credit', value: true },
        ],
        outcomeText: 'Small purchases. Paid in full. Month after month. Your credit score climbs. Another invisible barrier slowly lowered.',
        isRecommended: true,
      },
    ],
    tags: ['financial', 'progress', 'milestone'],
    isRepeatable: false,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_first_snow',
    title: 'The First Snow',
    description: 'Snow falls for the first time this season. If you\'re from somewhere warm, it still feels like magic. Or misery.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'enjoy_it',
        text: 'Find the beauty in it',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -10 },
        ],
        outcomeText: 'White covering everything. Silence. Children playing. This is part of your story now. This cold. This beauty. This new.',
        isRecommended: true,
      },
      {
        id: 'suffer_through',
        text: 'Suffer through the cold',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Your body wasn\'t built for this. The cold seeps into your bones. Another thing to adapt to. The list never ends.',
      },
    ],
    tags: ['daily-life', 'adaptation', 'nature'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_helping_translate',
    title: 'The Translator',
    description: 'Someone in your community needs help translating. A document. A phone call. A doctor\'s visit. You can help.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'volunteer',
        text: 'Offer your help',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'stat-change', target: 'communityConnection', value: 15 },
        ],
        outcomeText: 'You translate. Explain. Bridge worlds. The gratitude in their eyes reminds you how far you\'ve come. And how much we need each other.',
        isRecommended: true,
      },
    ],
    tags: ['community', 'helping', 'language'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_phone_plan',
    title: 'Staying Connected',
    description: 'Finding a phone plan that works. Affordable. Good international rates. Everyone has an opinion.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'find_deal',
        text: 'Find the best deal',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'flag-set', target: 'good_phone_plan', value: true },
        ],
        outcomeText: 'International calling. Data. All for less than you were paying. Small victories. The community knows how to navigate.',
        isRecommended: true,
      },
    ],
    tags: ['daily-life', 'technology', 'connection'],
    isRepeatable: false,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_voter_moment',
    title: 'The Vote',
    description: 'Election day. Lines at polling places. You watch others vote for your future. Without being able to participate.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'help_others_vote',
        text: 'Help eligible voters get to the polls',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'stat-change', target: 'communityConnection', value: 10 },
        ],
        outcomeText: 'You can\'t vote. But you can drive. Translate. Encourage. Your voice counts in other ways.',
        isRecommended: true,
      },
      {
        id: 'feel_excluded',
        text: 'Feel the weight of exclusion',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'Taxation without representation. A phrase from history class. Now it\'s your reality. You work. You pay taxes. You can\'t vote on how they\'re spent.',
      },
    ],
    tags: ['politics', 'citizenship', 'exclusion'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_noise_complaint',
    title: 'The Noise',
    description: 'A neighbor complains about noise. Music. Cooking smells. Visitors. Is it really too loud? Or is it about something else?',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 30,
    choices: [
      {
        id: 'apologize_adjust',
        text: 'Apologize and adjust',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You make yourself smaller. Quieter. Less visible. It\'s easier than confrontation. But something shrinks inside too.',
      },
      {
        id: 'stand_ground',
        text: 'Stand your ground politely',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: '"I have as much right to this space as anyone." You know the rules. You\'re not breaking them. But the tension lingers.',
        isRecommended: true,
      },
    ],
    tags: ['housing', 'conflict', 'belonging'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_hometown_news',
    title: 'News From Home',
    description: 'Something happens in your country. Earthquake. Political crisis. Economic collapse. You watch the news from far away.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'stay_informed',
        text: 'Stay informed and connected',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'You call everyone. Check in. Send what you can. The helplessness is crushing. But at least you know.',
      },
      {
        id: 'limit_consumption',
        text: 'Limit your news consumption',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'You can\'t fix it from here. The constant worry doesn\'t help anyone. You check once a day. No more.',
        isRecommended: true,
      },
    ],
    tags: ['family', 'homeland', 'crisis'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_mentorship',
    title: 'The Mentor',
    description: 'Someone older in your community offers guidance. They\'ve been here longer. Navigated what you\'re navigating.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'accept_guidance',
        text: 'Accept their guidance',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
          { type: 'stat-change', target: 'communityConnection', value: 15 },
        ],
        outcomeText: 'They share wisdom. Mistakes to avoid. Doors that might open. You\'re not the first. You\'re not alone. The path exists because others walked it.',
        isRecommended: true,
      },
    ],
    tags: ['community', 'mentorship', 'support'],
    isRepeatable: false,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_identity_question',
    title: 'Who Are You?',
    description: 'A child asks where you\'re from. A simple question without a simple answer. Are you from there or here? Both? Neither?',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'both_worlds',
        text: 'Explain you carry both worlds',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: '"I\'m from there and here. I carry both places in me." The child nods. Children understand complexity better than adults.',
        isRecommended: true,
      },
      {
        id: 'simple_answer',
        text: 'Give the simple answer',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 0 },
        ],
        outcomeText: 'You name the country. They\'ve probably never heard of it. You spell it. Describe where it is. Geography lesson wrapped in identity.',
      },
    ],
    tags: ['identity', 'culture', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_tax_season',
    title: 'Tax Time',
    description: 'Tax season. You pay taxes. You file returns. You contribute to a system that doesn\'t always recognize your contributions.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 24 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'file_correctly',
        text: 'File carefully and correctly',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'finance-subtract', target: 'Tax Preparation', value: 100 },
        ],
        outcomeText: 'Every receipt. Every form. You\'re building a paper trail of legitimacy. Of being a taxpayer. Of contributing.',
        isRecommended: true,
      },
    ],
    tags: ['financial', 'bureaucracy', 'system'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_kids_homework',
    title: 'Homework Help',
    description: 'Your child needs homework help. American history. Math concepts explained differently. The curriculum is foreign.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'learn_together',
        text: 'Learn alongside them',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'relationship-change', target: 'child', value: 10 },
        ],
        outcomeText: 'You Google together. You learn the American story. You teach them yours. Education flows both ways.',
        isRecommended: true,
      },
      {
        id: 'find_tutor',
        text: 'Find additional help',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'finance-subtract', target: 'Tutoring', value: 100 },
        ],
        outcomeText: 'The library has homework help. A volunteer program at school. You find resources. Your kids will have advantages you didn\'t.',
      },
    ],
    tags: ['family', 'education', 'parenting'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_late_night_call',
    title: 'The Call',
    description: 'The phone rings at 2 AM. Your heart stops. At that hour, it\'s never good news.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 72 },
    conditions: [],
    weight: 25,
    choices: [
      {
        id: 'answer_call',
        text: 'Answer the phone',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'It\'s a misdial. Wrong number. Your heart slowly stops racing. The fear of that call lives in you. Always waiting.',
      },
    ],
    tags: ['family', 'fear', 'daily-life'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_found_community',
    title: 'Your People',
    description: 'You find a group of people from your country. Your region. Your language. In this vast new place, a pocket of familiar.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [],
    weight: 45,
    choices: [
      {
        id: 'join_community',
        text: 'Join and participate',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
          { type: 'stat-change', target: 'communityConnection', value: 25 },
        ],
        outcomeText: 'Language without translation. Jokes that land. Food that tastes like childhood. You\'re not alone here. You never were.',
        isRecommended: true,
      },
    ],
    tags: ['community', 'culture', 'belonging'],
    isRepeatable: false,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_childrens_citizenship',
    title: 'Their Future',
    description: 'Your American-born children. Citizens. They\'ll never know what you went through. Is that the victory or the tragedy?',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'feel_hopeful',
        text: 'Feel hopeful for their future',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -15 },
        ],
        outcomeText: 'This is why you came. This is the point. They\'ll have what you didn\'t. Doors that don\'t close. Paths that don\'t dead-end.',
        isRecommended: true,
      },
      {
        id: 'feel_distance',
        text: 'Feel the distance between your experiences',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'They\'ll grow up American. Won\'t fully understand your world. The gap between generations is also the gap between countries.',
      },
    ],
    tags: ['family', 'future', 'hope'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_support_group',
    title: 'The Circle',
    description: 'A support group for people in your situation. Others who understand. Who carry the same uncertainties.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [
      { type: 'stat', target: 'stress', operator: '>', value: 40 },
    ],
    weight: 35,
    choices: [
      {
        id: 'attend_group',
        text: 'Attend a session',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
          { type: 'stat-change', target: 'communityConnection', value: 15 },
        ],
        outcomeText: 'Strangers become allies. Stories shared in a circle. The isolation cracks open. You\'re not broken. You\'re overwhelmed by an overwhelming situation.',
        isRecommended: true,
      },
      {
        id: 'not_ready',
        text: 'Not ready to share',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Maybe later. When you\'re ready. The door stays open.',
      },
    ],
    tags: ['community', 'support', 'healing'],
    isRepeatable: false,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_citizenship_dream',
    title: 'The Dream',
    description: 'You dream about naturalization. The ceremony. The flag. The oath. Waking up is the hard part.',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 84 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'hold_dream',
        text: 'Hold onto the dream',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'Someday. Maybe. The dream isn\'t delusion. It\'s destination. Something to walk toward, even when the path is unclear.',
        isRecommended: true,
      },
      {
        id: 'set_aside',
        text: 'Set the dream aside for now',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Focus on today. Tomorrow\'s problems can wait. The dream can wait. Today requires attention.',
      },
    ],
    tags: ['hope', 'citizenship', 'future'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  // More Career Events
  {
    id: 'shared_credential_recognition',
    title: 'The Degree',
    description: 'Your degree from home means nothing here. Years of study. Expertise. Invisible. "You\'ll need to get recertified."',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'start_over',
        text: 'Begin the recertification process',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'flag-set', target: 'recertifying', value: true },
        ],
        outcomeText: 'More exams. More fees. Proving what you already proved. But the American credential opens American doors.',
        isRecommended: true,
      },
      {
        id: 'different_path',
        text: 'Find a different career path',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'Not what you trained for. Not what you dreamed. But practical. Possible. You adapt. You always do.',
      },
    ],
    tags: ['career', 'education', 'restart'],
    isRepeatable: false,
    isMandatory: false,
    priority: 3,
  },
  {
    id: 'shared_workplace_culture',
    title: 'The Misunderstanding',
    description: 'A cultural difference causes confusion at work. What\'s respectful where you\'re from is different here. You\'re still learning the rules.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'adapt_quickly',
        text: 'Adapt and learn the new norms',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Eye contact. Personal space. How to disagree politely. You learn the unwritten rules. Add them to your repertoire.',
        isRecommended: true,
      },
      {
        id: 'explain_yourself',
        text: 'Explain your cultural background',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: '"In my country, this is how we show respect." They listen. Maybe understand. The bridge-building is constant.',
      },
    ],
    tags: ['career', 'culture', 'adaptation'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_salary_negotiation',
    title: 'The Raise',
    description: 'Performance review season. Others are negotiating raises. Do you dare ask? Can you risk being seen as difficult?',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'ask_for_raise',
        text: 'Ask for what you deserve',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'finance-add', target: 'Salary Increase', value: 200 },
        ],
        outcomeText: 'You practice the conversation. Present your case. They say they\'ll think about it. A week later: a modest increase. Progress.',
        isRecommended: true,
      },
      {
        id: 'stay_quiet',
        text: 'Don\'t rock the boat',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Stability matters more than money. Keep your head down. Keep working. The raise can wait.',
      },
    ],
    tags: ['career', 'money', 'risk'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  // More Immigration Events
  {
    id: 'shared_interview_prep',
    title: 'The Big Interview',
    description: 'Your immigration interview is coming. The moment where everything could change. Or end.',
    timing: { type: 'random', earliestMonth: 24, latestMonth: 72 },
    conditions: [],
    weight: 30,
    choices: [
      {
        id: 'prepare_thoroughly',
        text: 'Prepare meticulously',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
          { type: 'flag-set', target: 'interview_ready', value: true },
        ],
        outcomeText: 'You study your own story. Every date. Every document. Your lawyer preps you. Mock interviews. Your future compressed into one hour.',
      },
    ],
    tags: ['immigration', 'milestone', 'preparation'],
    isRepeatable: false,
    isMandatory: false,
    priority: 5,
  },
  {
    id: 'shared_system_dysfunction',
    title: 'Lost in the System',
    description: 'USCIS lost your documents. Or misplaced them. Or never received them. Months of waiting. Then: "Please resubmit."',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 25,
    choices: [
      {
        id: 'resubmit',
        text: 'Resubmit everything',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 25 },
          { type: 'finance-subtract', target: 'Resubmission Fees', value: 200 },
        ],
        outcomeText: 'You make copies of everything this time. Send certified mail. Track every package. The system failed. You can\'t afford to.',
      },
    ],
    tags: ['immigration', 'bureaucracy', 'frustration'],
    isRepeatable: true,
    isMandatory: false,
    priority: 4,
  },
  {
    id: 'shared_expedite_denied',
    title: 'The Wait Continues',
    description: 'You applied to expedite your case. Emergency circumstances. They said no. Standard processing. 18 more months.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 48 },
    conditions: [],
    weight: 30,
    choices: [
      {
        id: 'accept_wait',
        text: 'Accept the timeline',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'You\'ve waited this long. What\'s another 18 months? Everything. And nothing. Time is the cruelest currency.',
      },
      {
        id: 'appeal_decision',
        text: 'Appeal or reapply ($300)',
        costs: [{ type: 'money', amount: 300 }],
        outcomes: [
          { type: 'finance-subtract', target: 'Expedite Appeal', value: 300 },
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'You try again. More documentation. Stronger arguments. Hope against experience.',
      },
    ],
    tags: ['immigration', 'waiting', 'bureaucracy'],
    isRepeatable: true,
    isMandatory: false,
    priority: 3,
  },
  // More Family/Emotional Events
  {
    id: 'shared_wedding_invitation',
    title: 'The Invitation',
    description: 'A sibling is getting married. Back home. You\'re invited. It\'s impossible.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'explain_absence',
        text: 'Explain why you can\'t come',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 20 },
        ],
        outcomeText: '"You know I would be there if I could." They know. They understand. But knowing doesn\'t fill the empty chair at the table.',
      },
      {
        id: 'send_gift',
        text: 'Send a meaningful gift',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
          { type: 'finance-subtract', target: 'Wedding Gift', value: 200 },
        ],
        outcomeText: 'Money for their new life. A video message. Your love across oceans. It\'s not the same. Nothing is the same.',
      },
    ],
    tags: ['family', 'separation', 'milestone'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_homesick',
    title: 'The Ache',
    description: 'Some days the homesickness hits like a wave. Not triggered by anything specific. Just... there.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 72 },
    conditions: [],
    weight: 50,
    choices: [
      {
        id: 'let_yourself_feel',
        text: 'Let yourself feel it',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
          { type: 'stat-change', target: 'health', value: -5 },
        ],
        outcomeText: 'You cry. You remember. You long. The grief moves through you. Suppressing it only makes it stronger.',
        isRecommended: true,
      },
      {
        id: 'distract',
        text: 'Distract yourself',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'Work. Netflix. Exercise. Anything to not feel the hole. It works. Temporarily.',
      },
    ],
    tags: ['emotional', 'homesickness', 'grief'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_generational_bridge',
    title: 'Between Worlds',
    description: 'Your children speak English better than your language. They\'re becoming American. Is that loss or gain?',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 60 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'teach_language',
        text: 'Make an effort to teach them your language',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
          { type: 'relationship-change', target: 'child', value: 5 },
        ],
        outcomeText: 'Saturday mornings. Language lessons. They complain. They learn. Someday they\'ll understand why it matters.',
        isRecommended: true,
      },
      {
        id: 'accept_change',
        text: 'Accept the natural assimilation',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'This is what you wanted. For them to fit in. To belong. The price is distance. But maybe it\'s worth paying.',
      },
    ],
    tags: ['family', 'culture', 'change'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  // More Daily Life Events
  {
    id: 'shared_utility_hassle',
    title: 'The Bill',
    description: 'Setting up utilities. Or internet. Or any service that requires a credit check and ID.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 36 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'navigate_process',
        text: 'Navigate the process',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 10 },
        ],
        outcomeText: 'More deposits. More explanations. Eventually, success. Another small battle won. The list of battles is endless.',
      },
    ],
    tags: ['daily-life', 'bureaucracy', 'system'],
    isRepeatable: true,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_healthcare_navigation',
    title: 'The System',
    description: 'Understanding American healthcare. Premiums. Deductibles. Networks. Co-pays. It\'s a language unto itself.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'get_help',
        text: 'Get help understanding it',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
        ],
        outcomeText: 'A community navigator explains. Slowly. Clearly. You understand enough to make decisions. Healthcare literacy is survival.',
        isRecommended: true,
      },
      {
        id: 'figure_out_alone',
        text: 'Try to figure it out yourself',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 15 },
        ],
        outcomeText: 'Hours online. Comparing plans. Hoping you\'re choosing right. The stakes are high. The information is dense.',
      },
    ],
    tags: ['health', 'system', 'learning'],
    isRepeatable: false,
    isMandatory: false,
    priority: 2,
  },
  {
    id: 'shared_fashion_change',
    title: 'Dressing Different',
    description: 'Your clothes from home stand out. Do you blend in? Stay visible? Fashion is politics.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 24 },
    conditions: [],
    weight: 35,
    choices: [
      {
        id: 'blend_in',
        text: 'Adapt your style',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -5 },
          { type: 'finance-subtract', target: 'New Clothes', value: 100 },
        ],
        outcomeText: 'New clothes. New look. Fewer stares. Fitting in has its comforts. And its costs.',
      },
      {
        id: 'stay_you',
        text: 'Keep your style',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: 5 },
        ],
        outcomeText: 'You dress how you dress. Some days it\'s armor. Some days it\'s target. Either way, it\'s you.',
        isRecommended: true,
      },
    ],
    tags: ['identity', 'culture', 'daily-life'],
    isRepeatable: false,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_friendship_formed',
    title: 'The Friend',
    description: 'You make a real friend here. Not just an acquaintance. Someone who sees you.',
    timing: { type: 'random', earliestMonth: 6, latestMonth: 48 },
    conditions: [],
    weight: 40,
    choices: [
      {
        id: 'nurture_friendship',
        text: 'Nurture the friendship',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
          { type: 'stat-change', target: 'communityConnection', value: 20 },
        ],
        outcomeText: 'Coffee dates. Text threads. Someone to call when it\'s hard. Friendship is survival. You\'re less alone now.',
        isRecommended: true,
      },
    ],
    tags: ['social', 'friendship', 'positive'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
  {
    id: 'shared_moment_of_peace',
    title: 'The Pause',
    description: 'A rare moment of peace. Nothing urgent. Nothing pending. Just... quiet.',
    timing: { type: 'random', earliestMonth: 12, latestMonth: 72 },
    conditions: [
      { type: 'stat', target: 'stress', operator: '>', value: 30 },
    ],
    weight: 35,
    choices: [
      {
        id: 'savor_peace',
        text: 'Savor it',
        outcomes: [
          { type: 'stat-change', target: 'stress', value: -20 },
          { type: 'stat-change', target: 'health', value: 10 },
        ],
        outcomeText: 'You breathe. Really breathe. The chaos pauses. You exist in this moment only. No past guilt. No future fear. Just now.',
        isRecommended: true,
      },
    ],
    tags: ['positive', 'peace', 'emotional'],
    isRepeatable: true,
    isMandatory: false,
    priority: 1,
  },
]

// ============ EXPORT ALL EVENTS ============

export const EVENTS: GameEvent[] = [
  ...MARIA_EVENTS,
  ...MARIA_CHAIN_EVENTS,
  ...DAVID_EVENTS,
  ...DAVID_CHAIN_EVENTS,
  ...FATIMA_EVENTS,
  ...FATIMA_CHAIN_EVENTS,
  ...ELENA_EVENTS,
  ...ELENA_CHAIN_EVENTS,
  ...SHARED_EVENTS,
]

// Export by category for filtering
export const EVENTS_BY_CHARACTER = {
  maria: [...MARIA_EVENTS, ...MARIA_CHAIN_EVENTS],
  david: [...DAVID_EVENTS, ...DAVID_CHAIN_EVENTS],
  fatima: [...FATIMA_EVENTS, ...FATIMA_CHAIN_EVENTS],
  elena: [...ELENA_EVENTS, ...ELENA_CHAIN_EVENTS],
  shared: SHARED_EVENTS,
}

// Export all event chains for chain tracking
export const EVENT_CHAINS: EventChain[] = [
  ...MARIA_CHAINS,
  ...DAVID_CHAINS,
  ...FATIMA_CHAINS,
  ...ELENA_CHAINS,
]

// Re-export chain events and definitions for direct access
export {
  MARIA_CHAIN_EVENTS,
  MARIA_CHAINS,
  DAVID_CHAIN_EVENTS,
  DAVID_CHAINS,
  FATIMA_CHAIN_EVENTS,
  FATIMA_CHAINS,
  ELENA_CHAIN_EVENTS,
  ELENA_CHAINS,
}
